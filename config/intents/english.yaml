# Intent Pattern Configuration
# Patterns for natural language understanding in English

patterns:
  # Navigation / Project Opening
  - regex: "open\\s+(.+?)(?:\\s+project)?$"
    action: "open_project"
    confidence: 0.9
    examples:
      - "open my-app"
      - "open the dashboard project"

  - regex: "(?:go|switch)\\s+to\\s+(.+)"
    action: "open_project"
    confidence: 0.85
    examples:
      - "go to my-app"
      - "switch to dashboard"

  # Component Creation
  - regex: "(?:create|make|add|new)\\s+(?:a\\s+)?(?:new\\s+)?component\\s+(?:called\\s+|named\\s+)?(.+)"
    action: "create_component"
    confidence: 0.95
    examples:
      - "create a component Button"
      - "make a new component called LoginForm"
      - "add component UserCard"

  - regex: "(?:create|make|add|new)\\s+(?:a\\s+)?(?:new\\s+)?(.+)\\s+component"
    action: "create_component"
    confidence: 0.95
    examples:
      - "create a sidebar component"
      - "make a login component"
      - "add navigation component"

  # Page Creation
  - regex: "(?:create|make|add|new)\\s+(?:a\\s+)?(?:new\\s+)?(?:page|screen|route)\\s+(?:called\\s+|named\\s+|for\\s+)?(.+)"
    action: "create_page"
    confidence: 0.95
    examples:
      - "create a page dashboard"
      - "make a new screen for settings"

  - regex: "(?:create|make|add|new)\\s+(?:a\\s+)?(?:new\\s+)?(.+)\\s+(?:page|screen)"
    action: "create_page"
    confidence: 0.95
    examples:
      - "create a login page"
      - "make a dashboard screen"
      - "add settings page"
      - "add page profile"

  # API Endpoint Creation
  - regex: "(?:create|make|add|new)\\s+(?:an?\\s+)?(?:new\\s+)?(?:api|endpoint)\\s+(?:for\\s+|to\\s+)?(.+)"
    action: "create_api"
    confidence: 0.95
    examples:
      - "create an API for users"
      - "make a new endpoint for auth"
      - "add API /products"

  - regex: "(?:create|make|add)\\s+(?:a\\s+)?(?:new\\s+)?(?:rest\\s+)?api\\s+endpoint\\s+(?:for\\s+|to\\s+)?(.+)"
    action: "create_api"
    confidence: 0.92
    examples:
      - "create a REST API endpoint for users"
      - "add api endpoint /users/{id}"

  # File Creation
  - regex: "(?:create|make|add|new)\\s+(?:a\\s+)?(?:new\\s+)?file\\s+(.+)"
    action: "create_file"
    confidence: 0.9
    examples:
      - "create a file config.json"
      - "make file utils.ts"

  # Git Operations
  - regex: "(?:commit|save)(?:\\s+(?:these\\s+)?changes)?(?:\\s+with\\s+message\\s+[\"'](.+)[\"'])?"
    action: "git_commit"
    confidence: 0.9
    examples:
      - "commit these changes"
      - "save with message 'Add login feature'"
      - "commit"

  - regex: "(?:push|upload)(?:\\s+(?:to\\s+)?(?:remote|origin|github))?"
    action: "git_push"
    confidence: 0.9
    examples:
      - "push to remote"
      - "upload to github"

  - regex: "create\\s+(?:a\\s+)?(?:pr|pull\\s+request)(?:\\s+for\\s+(.+))?"
    action: "create_pr"
    confidence: 0.95
    examples:
      - "create a PR"
      - "create pull request for login feature"

  - regex: "(?:create|checkout|switch\\s+to)\\s+branch\\s+(.+)"
    action: "git_branch"
    confidence: 0.9
    examples:
      - "create branch feature/auth"
      - "checkout branch develop"

  # Package Management
  - regex: "install\\s+(.+?)(?:\\s+as\\s+(?:dev|development)(?:\\s+dependency)?)?"
    action: "install_package"
    confidence: 0.95
    examples:
      - "install axios"
      - "install jest as dev dependency"

  # Code Operations
  - regex: "fix\\s+(?:the\\s+)?(.+?)(?:\\s+(?:bug|error|issue))?"
    action: "fix_bug"
    confidence: 0.85
    examples:
      - "fix the login bug"
      - "fix authentication error"

  - regex: "refactor\\s+(.+)"
    action: "refactor"
    confidence: 0.9
    examples:
      - "refactor UserList component"
      - "refactor the authentication logic"

  - regex: "(?:create|add|write)\\s+(?:tests?|specs?)\\s+for\\s+(.+)"
    action: "create_test"
    confidence: 0.9
    examples:
      - "create tests for UserService"
      - "write test for login function"

  - regex: "(?:generate|write|create)\\s+(?:unit\\s+|integration\\s+|e2e\\s+)?tests?\\s+for\\s+(.+)"
    action: "create_test"
    confidence: 0.92
    examples:
      - "generate unit tests for UserService"
      - "write integration tests for payments"
      - "create tests for the login flow"

  - regex: "(?:generate|write)\\s+tests?\\b"
    action: "create_test"
    confidence: 0.8
    examples:
      - "generate tests"
      - "write tests"

  - regex: "run\\s+tests?"
    action: "run_tests"
    confidence: 0.95
    examples:
      - "run tests"
      - "run test"

  - regex: "(?:do\\s+a\\s+)?code\\s+review\\b"
    action: "code_review"
    confidence: 0.95
    examples:
      - "code review this"
      - "do a code review"
      - "review the changes"

  - regex: "(?:review|analyze)\\s+the\\s+code\\b"
    action: "code_review"
    confidence: 0.85
    examples:
      - "review the code"
      - "analyze the code for issues"

  - regex: "(?:add|write|generate)\\s+documentation\\b"
    action: "generate_docs"
    confidence: 0.9
    examples:
      - "add documentation"
      - "generate documentation"
      - "write docs"

  - regex: "(?:add|write|generate)\\s+.+\\s+documentation\\b"
    action: "generate_docs"
    confidence: 0.75
    examples:
      - "add great documentation for this code"
      - "write detailed documentation"

  - regex: "(?:add|write)\\s+(?:docstrings|comments)\\b"
    action: "generate_docs"
    confidence: 0.85
    examples:
      - "add docstrings"
      - "write comments"

  - regex: "(?:debug|troubleshoot)\\s+(.+)"
    action: "fix_bug"
    confidence: 0.8
    examples:
      - "debug the build failure"
      - "troubleshoot the API error"

  - regex: "explain\\s+(.+)"
    action: "explain_code"
    confidence: 0.8
    examples:
      - "explain this code"
      - "explain the UserService"

  - regex: "(?:optimize|improve)\\s+performance\\b"
    action: "optimize_performance"
    confidence: 0.85
    examples:
      - "optimize performance"
      - "improve performance"

  - regex: "optimize\\s+(.+)"
    action: "optimize_performance"
    confidence: 0.75
    examples:
      - "optimize database queries"
      - "optimize this function"

  - regex: "(?:run|start|launch|serve)\\s+(?:the\\s+)?(?:app|server|service|site|frontend|backend)\\b"
    action: "run_app"
    confidence: 0.85
    examples:
      - "run the app"
      - "start the server"
      - "serve the site"

  - regex: "build(?:\\s+(?:the\\s+)?(?:app|project|site))?\\b"
    action: "build"
    confidence: 0.8
    examples:
      - "build the project"
      - "build"

  - regex: "run\\s+lint|lint\\s+the\\s+code|lint\\b"
    action: "lint"
    confidence: 0.9
    examples:
      - "run lint"
      - "lint the code"

  - regex: "(?:format|prettify)\\s+(?:the\\s+)?code\\b"
    action: "format_code"
    confidence: 0.85
    examples:
      - "format the code"
      - "prettify code"

  - regex: "(?:typecheck|type\\s+check)\\b"
    action: "typecheck"
    confidence: 0.85
    examples:
      - "typecheck"
      - "run type check"

  - regex: "(?:add|install)\\s+dependency\\s+(.+)"
    action: "install_package"
    confidence: 0.9
    examples:
      - "install dependency axios"
      - "add dependency lodash"

  - regex: "(?:find|search)\\s+(.+)"
    action: "search_code"
    confidence: 0.6
    examples:
      - "find usages of foo"
      - "search for TODOs"

  - regex: "(?:run|trigger)\\s+ci|check\\s+ci\\b"
    action: "ci"
    confidence: 0.75
    examples:
      - "run ci"
      - "check ci"

  - regex: "(?:deploy|release)\\s+(.+)"
    action: "deploy"
    confidence: 0.7
    examples:
      - "deploy the app"
      - "release to staging"

  - regex: "(?:run|apply)\\s+migrations?\\b"
    action: "db_migrate"
    confidence: 0.85
    examples:
      - "run migrations"
      - "apply migration"

  - regex: "(?:generate|create)\\s+migration\\b"
    action: "db_generate_migration"
    confidence: 0.85
    examples:
      - "generate migration"
      - "create migration"

  - regex: "(?:docker|compose)\\s+(?:up|down|build|ps)\\b"
    action: "docker"
    confidence: 0.8
    examples:
      - "docker compose up"
      - "docker build"

  - regex: "(?:security|vulnerability)\\s+scan\\b"
    action: "security_scan"
    confidence: 0.8
    examples:
      - "security scan"
      - "run vulnerability scan"

  - regex: "add\\s+(?:a\\s+)?(.+)"
    action: "add_feature"
    confidence: 0.7
    examples:
      - "add dark mode"
      - "add a search feature"

# Fallback patterns (lower confidence, catch-all)
fallback:
  - regex: ".*"
    action: "general"
    confidence: 0.5

# Preprocessing rules
preprocessing:
  - remove_punctuation: true
  - lowercase: true
  - trim_whitespace: true
  - remove_extra_spaces: true

# Typo tolerance
typo_tolerance:
  enabled: true
  max_edit_distance: 2
  common_typos:
    "componenet": "component"
    "comit": "commit"
    "instlal": "install"
    "intsall": "install"
    "craete": "create"
    "rrefactor": "refactor"
