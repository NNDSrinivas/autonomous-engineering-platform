{"version":3,"file":"extension.js","mappings":";;;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,oBAAoB;AACpB;AACA,2CAA2C,WAAW;AACtD;AACA;AACA;AACA,iCAAiC,aAAa,wBAAwB,yCAAyC;AAC/G;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,uBAAuB,gEAAgE,yBAAyB,GAAG;AACjK;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,qCAAqC,yBAAyB;AAC5G;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,YAAY,yBAAyB;AACnF;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,uBAAuB,gEAAgE,qBAAqB,GAAG;AAC7J;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,wBAAwB,gEAAgE,6BAA6B,GAAG;AACtK;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;;;;;;;;;;ACxDJ;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC7Ca;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB,kBAAkB;AAClB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C,sBAAsB,mBAAO,CAAC,6DAAwB;AACtD,oBAAoB,mBAAO,CAAC,yDAAsB;AAClD,oBAAoB,mBAAO,CAAC,yDAAsB;AAClD,oBAAoB,mBAAO,CAAC,yDAAsB;AAClD,iBAAiB,mBAAO,CAAC,yCAAc;AACvC,iBAAiB,mBAAO,CAAC,iCAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,aAAa,UAAU,UAAU;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,kBAAkB,iCAAiC;AACjI,8EAA8E,kBAAkB,iCAAiC;AACjI,8EAA8E,kBAAkB,iCAAiC;AACjI;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,QAAQ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,eAAe;AACrE,oFAAoF,UAAU;AAC9F;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD,8DAA8D,QAAQ;AACtE;AACA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACjIa;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,0BAA0B,sBAAsB,mCAAmC,0EAA0E,iBAAiB;AAC9K,yBAAyB,sBAAsB;AAC/C,8BAA8B;AAC9B;AACA,6BAA6B;AAC7B;AACA;AACA,iBAAiB;;;;;;;;;;;ACnDJ;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C,eAAe,mBAAO,CAAC,8CAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,oBAAoB;AACnE;AACA;AACA,+CAA+C,cAAc;AAC7D;AACA;AACA;AACA;AACA;AACA,yEAAyE,QAAQ;AACjF,2CAA2C,wBAAwB;AACnE;AACA,SAAS;AACT;AACA;AACA,iBAAiB;;;;;;;;;;;ACtFJ;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C,eAAe,mBAAO,CAAC,8CAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,MAAM,SAAS,WAAW,qBAAqB,SAAS;AACtF;AACA,4DAA4D,MAAM;AAClE;AACA;AACA;AACA;AACA;AACA,2CAA2C,SAAS;AACpD,6CAA6C,SAAS;AACtD,wCAAwC,eAAe;AACvD;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,mBAAmB,4CAA4C,mBAAmB;AAC1H;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,IAAI,qBAAqB;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,sBAAsB,sBAAsB;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,uBAAuB;AACnE;AACA,2BAA2B,oCAAoC;AAC/D,uCAAuC,2BAA2B;AAClE,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B;;;;;;;;;;;ACvQd;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB;AACzB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C,eAAe,mBAAO,CAAC,8CAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,wBAAwB;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA,gBAAgB,uCAAuC,sCAAsC,YAAY,EAAE,IAAI,oBAAoB,IAAI,qBAAqB;AAC5J;AACA;AACA;AACA,cAAc,6BAA6B,gCAAgC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,sBAAsB,sBAAsB;AACpF;AACA;AACA;AACA,cAAc,qOAAqO;AACnP,cAAc,sLAAsL;AACpM,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,qBAAqB;AAClC;AACA;AACA;AACA;AACA;AACA,yBAAyB;;;;;;;;;;;ACjLZ;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB,aAAa;AACb,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C;AACA;AACA,qEAAqE,oBAAoB;AACzF,uDAAuD,MAAM,SAAS,oBAAoB;AAC1F;AACA;AACA;AACA;AACA,4EAA4E,UAAU,gBAAgB,QAAQ,YAAY,gBAAgB,iBAAiB,oBAAoB,MAAM,GAAG,WAAW,gBAAgB,OAAO;AAC1N;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC3DA,mC;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://aep-agent/./src/api/client.ts","webpack://aep-agent/./src/config.ts","webpack://aep-agent/./src/extension.ts","webpack://aep-agent/./src/features/approvals.ts","webpack://aep-agent/./src/features/authPanel.ts","webpack://aep-agent/./src/features/chatSidebar.ts","webpack://aep-agent/./src/features/planPanel.ts","webpack://aep-agent/./src/webview/view.ts","webpack://aep-agent/external commonjs \"vscode\"","webpack://aep-agent/webpack/bootstrap","webpack://aep-agent/webpack/before-startup","webpack://aep-agent/webpack/startup","webpack://aep-agent/webpack/after-startup"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AEPClient = void 0;\nclass AEPClient {\n    constructor(ctx, baseUrl, orgId) {\n        this.ctx = ctx;\n        this.baseUrl = baseUrl;\n        this.orgId = orgId;\n    }\n    setToken(t) { this.token = t; }\n    headers() {\n        const h = { 'Content-Type': 'application/json', 'X-Org-Id': this.orgId };\n        if (this.token)\n            h['Authorization'] = `Bearer ${this.token}`;\n        return h;\n    }\n    async startDeviceCode() {\n        const r = await fetch(`${this.baseUrl}/oauth/device/start`, { method: 'POST', headers: this.headers() });\n        if (!r.ok)\n            throw new Error(await r.text());\n        return await r.json();\n    }\n    async pollDeviceCode(deviceCode) {\n        const r = await fetch(`${this.baseUrl}/oauth/device/poll`, { method: 'POST', headers: this.headers(), body: JSON.stringify({ device_code: deviceCode }) });\n        if (!r.ok)\n            throw new Error(await r.text());\n        const tok = await r.json();\n        this.setToken(tok.access_token);\n        return tok;\n    }\n    async listMyJiraIssues() {\n        const r = await fetch(`${this.baseUrl}/api/integrations/jira/my-issues`, { headers: this.headers() });\n        if (!r.ok)\n            return [];\n        return await r.json();\n    }\n    async me() {\n        const r = await fetch(`${this.baseUrl}/api/me`, { headers: this.headers() });\n        if (!r.ok)\n            return {};\n        return await r.json();\n    }\n    async proposePlan(issueKey) {\n        const r = await fetch(`${this.baseUrl}/api/agent/propose`, { method: 'POST', headers: this.headers(), body: JSON.stringify({ issue_key: issueKey }) });\n        if (!r.ok)\n            throw new Error(await r.text());\n        return await r.json();\n    }\n    async applyPatch(patch) {\n        const r = await fetch(`${this.baseUrl}/api/ai/apply-patch`, { method: 'POST', headers: this.headers(), body: JSON.stringify({ diff: patch, dry_run: false }) });\n        const j = await r.json();\n        if (!r.ok)\n            throw new Error(j.detail || JSON.stringify(j));\n        return j;\n    }\n}\nexports.AEPClient = AEPClient;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getConfig = getConfig;\nconst vscode = __importStar(require(\"vscode\"));\nfunction getConfig() {\n    const c = vscode.workspace.getConfiguration('aep');\n    return {\n        baseUrl: String(c.get('baseUrl')),\n        orgId: String(c.get('orgId')),\n        llm: String(c.get('llm')),\n        portalUrl: String(c.get('portalUrl'))\n    };\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.activate = activate;\nexports.deactivate = deactivate;\nconst vscode = __importStar(require(\"vscode\"));\nconst chatSidebar_1 = require(\"./features/chatSidebar\");\nconst planPanel_1 = require(\"./features/planPanel\");\nconst approvals_1 = require(\"./features/approvals\");\nconst authPanel_1 = require(\"./features/authPanel\");\nconst client_1 = require(\"./api/client\");\nconst config_1 = require(\"./config\");\nconst OUTPUT_CHANNEL = 'AEP Agent';\nlet outputChannel;\nasync function activate(context) {\n    outputChannel = vscode.window.createOutputChannel(OUTPUT_CHANNEL);\n    const output = outputChannel;\n    output.appendLine('Activating AEP Agent extension‚Ä¶');\n    try {\n        const cfg = (0, config_1.getConfig)();\n        output.appendLine(`Using backend ${cfg.baseUrl} for org ${cfg.orgId}`);\n        const client = new client_1.AEPClient(context, cfg.baseUrl, cfg.orgId);\n        const approvals = new approvals_1.Approvals(context, client);\n        const chat = new chatSidebar_1.ChatSidebarProvider(context, client);\n        const plan = new planPanel_1.PlanPanelProvider(context, client, approvals);\n        const auth = new authPanel_1.AuthPanel(context, client, cfg.portalUrl);\n        const disposables = [\n            vscode.window.registerWebviewViewProvider('aep.chatView', chat, { webviewOptions: { retainContextWhenHidden: true } }),\n            vscode.window.registerWebviewViewProvider('aep.planView', plan, { webviewOptions: { retainContextWhenHidden: true } }),\n            vscode.window.registerWebviewViewProvider('aep.authView', auth, { webviewOptions: { retainContextWhenHidden: true } }),\n            vscode.commands.registerCommand('aep.signIn', () => startDeviceFlow(client, chat, output)),\n            vscode.commands.registerCommand('aep.startSession', () => {\n                vscode.window.showInformationMessage('Starting an AEP planning session‚Ä¶');\n            }),\n            vscode.commands.registerCommand('aep.openPortal', () => {\n                const portal = cfg.portalUrl || 'https://portal.aep.navra.ai';\n                vscode.env.openExternal(vscode.Uri.parse(portal));\n            }),\n            vscode.commands.registerCommand('aep.plan.approve', () => approvals.approveSelected()),\n            vscode.commands.registerCommand('aep.plan.reject', () => approvals.rejectSelected()),\n            vscode.commands.registerCommand('aep.applyPatch', () => plan.applySelectedPatch())\n        ];\n        context.subscriptions.push(...disposables, output);\n        output.appendLine('AEP Agent extension activated successfully.');\n    }\n    catch (error) {\n        const message = error instanceof Error ? error.message : String(error);\n        output.appendLine(`Activation failed: ${message}`);\n        vscode.window.showErrorMessage('AEP Agent extension failed to activate. Check the AEP Agent output channel for details.');\n        throw error;\n    }\n}\nasync function startDeviceFlow(client, chat, output) {\n    try {\n        const flow = await client.startDeviceCode();\n        output.appendLine('Device flow started. Opening browser for verification.');\n        const verificationUrl = flow.verification_uri_complete || flow.verification_uri;\n        const codeLabel = flow.user_code ? ` (code: ${flow.user_code})` : '';\n        vscode.window.showInformationMessage(`Open the browser to complete sign-in${codeLabel}`, 'Open Browser').then(sel => {\n            if (sel === 'Open Browser' && verificationUrl) {\n                vscode.env.openExternal(vscode.Uri.parse(verificationUrl));\n            }\n        });\n        if (!flow.device_code) {\n            throw new Error('Device authorization response was missing a device code.');\n        }\n        await pollDeviceCode(client, flow.device_code, output);\n        vscode.window.showInformationMessage('Signed in to AEP successfully.');\n        chat.refresh();\n    }\n    catch (error) {\n        const message = error instanceof Error ? error.message : String(error);\n        output.appendLine(`Sign-in failed: ${message}`);\n        vscode.window.showErrorMessage(`AEP sign-in failed: ${message}`);\n    }\n}\nasync function pollDeviceCode(client, deviceCode, output) {\n    const maxAttempts = 90;\n    for (let attempt = 0; attempt < maxAttempts; attempt++) {\n        try {\n            await client.pollDeviceCode(deviceCode);\n            output.appendLine('Received access token from device flow.');\n            return;\n        }\n        catch (error) {\n            const message = typeof error?.message === 'string' ? error.message : String(error);\n            if (message.includes('428')) {\n                await new Promise(resolve => setTimeout(resolve, 2000));\n                continue;\n            }\n            throw error;\n        }\n    }\n    throw new Error('Timed out waiting for device authorization.');\n}\nfunction deactivate() {\n    outputChannel?.appendLine('AEP Agent extension deactivated.');\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Approvals = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nclass Approvals {\n    constructor(ctx, client) {\n        this.ctx = ctx;\n        this.client = client;\n        this.selected = null;\n    }\n    set(step) { this.selected = step; }\n    async approve(step) { this.selected = step; await vscode.window.withProgress({ location: vscode.ProgressLocation.Notification, title: 'Approving step‚Ä¶' }, async () => { }); }\n    async reject(step) { this.selected = step; vscode.window.showInformationMessage('Step rejected'); }\n    async approveSelected() { if (this.selected)\n        await this.approve(this.selected); }\n    async rejectSelected() { if (this.selected)\n        await this.reject(this.selected); }\n}\nexports.Approvals = Approvals;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AuthPanel = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst view_1 = require(\"../webview/view\");\nclass AuthPanel {\n    constructor(ctx, client, portalUrl) {\n        this.ctx = ctx;\n        this.client = client;\n        this.portalUrl = portalUrl;\n    }\n    resolveWebviewView(view) {\n        this.view = view;\n        view.webview.options = { enableScripts: true };\n        const body = `\n      <div class=\"card\">\n        <div class=\"row\"><span class=\"h\">Welcome to AEP Agent</span></div>\n        <p>Sign in to connect your IDE with AEP. New here? <a class=\"link\" id=\"signup\">Create an account</a>.</p>\n        <div class=\"row\">\n          <vscode-button id=\"signin\">Sign In</vscode-button>\n          <vscode-button appearance=\"secondary\" id=\"openPortal\">Open Portal</vscode-button>\n        </div>\n      </div>\n      <div class=\"card\" id=\"device\" style=\"display:none;\">\n        <div class=\"h\">Device Code</div>\n        <p>We opened your browser. If asked, paste this code:</p>\n        <pre class=\"mono\" id=\"code\"></pre>\n        <div class=\"row\"><vscode-button id=\"copy\">Copy Code</vscode-button></div>\n      </div>`;\n        view.webview.html = (0, view_1.boilerplate)(view.webview, this.ctx, body, ['base.css'], ['auth.js']);\n        view.webview.onDidReceiveMessage(async (m) => {\n            try {\n                if (m.type === 'open') {\n                    const url = m.url === 'portal:' ? this.portalUrl : m.url;\n                    vscode.env.openExternal(vscode.Uri.parse(url));\n                }\n                if (m.type === 'signin') {\n                    const flow = await this.client.startDeviceCode();\n                    view.webview.postMessage({ type: 'flow', flow });\n                    vscode.env.openExternal(vscode.Uri.parse(flow.verification_uri_complete || flow.verification_uri));\n                    await this.client.pollDeviceCode(flow.device_code);\n                    view.webview.postMessage({ type: 'done' });\n                    vscode.window.showInformationMessage('Signed in to AEP successfully.');\n                }\n            }\n            catch (error) {\n                const message = error?.message ?? String(error);\n                vscode.window.showErrorMessage(`Authentication failed: ${message}`);\n                view.webview.postMessage({ type: 'error', message });\n            }\n        });\n    }\n}\nexports.AuthPanel = AuthPanel;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChatSidebarProvider = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst view_1 = require(\"../webview/view\");\nclass ChatSidebarProvider {\n    constructor(ctx, client) {\n        this.ctx = ctx;\n        this.client = client;\n    }\n    resolveWebviewView(view) {\n        this.view = view;\n        view.webview.options = { enableScripts: true };\n        this.render();\n        view.webview.onDidReceiveMessage(async (m) => {\n            console.log('ChatSidebar received message:', m);\n            if (m.type === 'openExternal') {\n                vscode.env.openExternal(vscode.Uri.parse(m.url));\n            }\n            else if (m.type === 'openPortal') {\n                vscode.commands.executeCommand('aep.openPortal');\n            }\n            else if (m.type === 'pickIssue') {\n                vscode.commands.executeCommand('aep.startSession');\n            }\n            else if (m.type === 'signIn') {\n                vscode.commands.executeCommand('aep.signIn');\n                // Refresh after sign in attempt\n                setTimeout(() => this.render(), 2000);\n            }\n            else if (m.type === 'startSession') {\n                vscode.commands.executeCommand('aep.startSession');\n            }\n            else if (m.type === 'refresh') {\n                await this.render();\n            }\n            else if (m.type === 'chat' && m.message) {\n                await this.handleChatMessage(m.message);\n            }\n        });\n    }\n    refresh() {\n        if (this.view)\n            this.render();\n    }\n    async sendHello() {\n        const issues = await this.client.listMyJiraIssues();\n        this.post({ type: 'hello', issues });\n    }\n    post(message) {\n        if (this.view) {\n            this.view.webview.postMessage(message);\n        }\n    }\n    async render() {\n        try {\n            const [me, issues] = await Promise.all([\n                this.client.me().catch(() => ({})),\n                this.client.listMyJiraIssues().catch(() => [])\n            ]);\n            const greeting = (() => {\n                const h = new Date().getHours();\n                if (h < 12)\n                    return 'Good morning';\n                if (h < 18)\n                    return 'Good afternoon';\n                return 'Good evening';\n            })();\n            const makeIssue = (i) => `\n      <div class=\"card\">\n        <div class=\"row\"><b>${i.key}</b> ‚Äî ${i.summary} <span class=\"chip\">${i.status}</span></div>\n        <div class=\"row\">\n          <vscode-button appearance=\"secondary\" data-url=\"${i.url}\" class=\"open\">Open in Jira</vscode-button>\n          <vscode-button class=\"plan\">Plan</vscode-button>\n        </div>\n      </div>`;\n            const body = me?.email ? `\n      <div class=\"card\">\n        <div class=\"row\"><span class=\"h\">${greeting}, welcome to AEP Agent</span></div>\n        <div class=\"row mono\">Signed in as ${me.email}</div>\n        <div class=\"row\" style=\"gap:8px;margin-top:8px;\">\n          <vscode-button id=\"start\" appearance=\"primary\">Start Session</vscode-button>\n          <vscode-button id=\"refresh\" appearance=\"secondary\">Refresh</vscode-button>\n        </div>\n      </div>\n      ${issues.length ? issues.map(makeIssue).join('') : `<div class=\"empty\">No issues found. Check your Jira integration.</div>`}\n    ` : `\n      <div class=\"landing-container\">\n        <div class=\"hero-section\">\n          <div class=\"logo-area\">\n            <div class=\"logo\">ü§ñ</div>\n            <h1>AEP Agent</h1>\n            <p class=\"tagline\">Your AI-powered development assistant</p>\n            <div class=\"status-indicator status-disconnected\">\n              ‚ö†Ô∏è Not connected - Authentication required\n            </div>\n          </div>\n\n          <div class=\"auth-section\">\n            <vscode-button appearance=\"primary\" id=\"signIn\">\n              üîê Sign In with Auth0\n            </vscode-button>\n            <vscode-button appearance=\"secondary\" id=\"getStarted\">\n              üß™ Demo Mode\n            </vscode-button>\n            <p style=\"margin-top: 1rem; font-size: 0.85em; color: var(--vscode-descriptionForeground); text-align: center;\">\n              ‚ÑπÔ∏è Requires AEP backend server for authentication\n            </p>\n          </div>\n        </div>\n\n        <div class=\"features-grid\">\n          <div class=\"feature-card\">\n            <div class=\"feature-icon\">üíª</div>\n            <h3>Code Analysis</h3>\n            <p>Get instant AI-powered code reviews and suggestions</p>\n          </div>\n          \n          <div class=\"feature-card\">\n            <div class=\"feature-icon\">üìã</div>\n            <h3>Task Planning</h3>\n            <p>Break down JIRA issues into actionable steps</p>\n          </div>\n          \n          <div class=\"feature-card\">\n            <div class=\"feature-icon\">üîß</div>\n            <h3>Auto Patches</h3>\n            <p>Apply AI-generated code changes with confidence</p>\n          </div>\n          \n          <div class=\"feature-card\">\n            <div class=\"feature-icon\">üë•</div>\n            <h3>Team Collaboration</h3>\n            <p>Share insights and collaborate with your team</p>\n          </div>\n        </div>\n\n        <div class=\"quick-start\">\n          <h3>Quick Start</h3>\n          <div class=\"quick-actions\">\n            <button class=\"action-btn\" id=\"tryDemo\">\n              <span class=\"action-icon\">üéØ</span>\n              <div>\n                <div class=\"action-title\">Try Demo</div>\n                <div class=\"action-desc\">Explore features without signing in</div>\n              </div>\n            </button>\n            \n            <button class=\"action-btn\" id=\"loadSample\">\n              <span class=\"action-icon\">üìù</span>\n              <div>\n                <div class=\"action-title\">Load Sample Tasks</div>\n                <div class=\"action-desc\">See how AEP handles real projects</div>\n              </div>\n            </button>\n          </div>\n        </div>\n\n        <div class=\"demo-chat\" id=\"demoChat\" style=\"display: none;\">\n          <div class=\"chat-header\">\n            <h3>üí¨ Chat with AEP Agent</h3>\n            <button class=\"close-btn\" id=\"closeDemo\">√ó</button>\n          </div>\n          <div class=\"chat-messages\" id=\"chatMessages\"></div>\n          <div class=\"chat-input-area\">\n            <textarea id=\"chatInput\" placeholder=\"Ask me anything about your code...\"></textarea>\n            <button id=\"sendMessage\" class=\"send-btn\">Send</button>\n          </div>\n        </div>\n      </div>`;\n            this.view.webview.html = (0, view_1.boilerplate)(this.view.webview, this.ctx, body, ['base.css', 'landing.css'], ['chat.js']);\n        }\n        catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            console.error('ChatSidebar render failed:', message);\n            const fallback = `\n        <div class=\"landing-container\">\n          <div class=\"hero-section\">\n            <div class=\"logo-area\">\n              <div class=\"logo\">‚ö†Ô∏è</div>\n              <h1>AEP Agent</h1>\n              <p class=\"tagline\">We couldn't load your workspace right now.</p>\n            </div>\n            <p style=\"color: var(--vscode-descriptionForeground);\">${this.escape(message)}</p>\n            <vscode-button appearance=\"secondary\" id=\"retry\">Retry</vscode-button>\n          </div>\n        </div>`;\n            this.view.webview.html = (0, view_1.boilerplate)(this.view.webview, this.ctx, fallback, ['base.css', 'landing.css'], ['chat.js']);\n        }\n    }\n    escape(text) {\n        return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    }\n    async handleChatMessage(message) {\n        try {\n            // Show user message immediately\n            this.showChatMessage('user', message);\n            // Show typing indicator\n            this.showChatMessage('system', 'ü§î Thinking...');\n            // Send to AI backend\n            const response = await fetch(`${this.client['baseUrl']}/api/chat`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ message, type: 'question' })\n            });\n            if (response.ok) {\n                const result = await response.json();\n                this.showChatMessage('assistant', result.response || result.message || 'I received your message but had trouble generating a response.');\n            }\n            else {\n                this.showChatMessage('assistant', 'Sorry, I\\'m having trouble connecting right now. Please try again later.');\n            }\n        }\n        catch (error) {\n            console.error('Chat error:', error);\n            this.showChatMessage('assistant', 'I encountered an error processing your message. Please check your connection and try again.');\n        }\n    }\n    showChatMessage(role, content) {\n        // Send message to webview for display\n        if (this.view) {\n            this.view.webview.postMessage({\n                type: 'chatMessage',\n                role,\n                content,\n                timestamp: new Date().toLocaleTimeString()\n            });\n        }\n    }\n}\nexports.ChatSidebarProvider = ChatSidebarProvider;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PlanPanelProvider = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst view_1 = require(\"../webview/view\");\nclass PlanPanelProvider {\n    constructor(ctx, client, approvals) {\n        this.ctx = ctx;\n        this.client = client;\n        this.approvals = approvals;\n        this.steps = [];\n        this.selectedIndex = 0;\n        this.selectedPatch = null;\n    }\n    resolveWebviewView(view) {\n        this.view = view;\n        view.webview.options = { enableScripts: true };\n        this.render();\n        view.webview.onDidReceiveMessage(async (message) => {\n            try {\n                if (message.type === 'load-plan' && message.issue) {\n                    this.steps = await this.client.proposePlan(message.issue);\n                    this.selectedIndex = 0;\n                    this.selectedPatch = this.steps[0]?.patch || null;\n                    this.render();\n                    return;\n                }\n                if (message.type === 'load-demo-plan') {\n                    this.steps = this.demoPlan();\n                    this.selectedIndex = 0;\n                    this.selectedPatch = this.steps[0]?.patch || null;\n                    this.render();\n                    vscode.window.showInformationMessage('Demo plan loaded! üöÄ');\n                    return;\n                }\n                if (message.type === 'select' && typeof message.index === 'number') {\n                    this.selectedIndex = message.index;\n                    this.selectedPatch = this.steps[message.index]?.patch || null;\n                    this.render();\n                    return;\n                }\n                if (message.type === 'approve') {\n                    await this.approvals.approve(this.steps[this.selectedIndex]);\n                    return;\n                }\n                if (message.type === 'reject') {\n                    await this.approvals.reject(this.steps[this.selectedIndex]);\n                    return;\n                }\n                if (message.type === 'applyPatch') {\n                    await vscode.commands.executeCommand('aep.applyPatch');\n                    return;\n                }\n            }\n            catch (error) {\n                this.showError(error);\n            }\n        });\n    }\n    refresh() { if (this.view)\n        this.render(); }\n    async applySelectedPatch() {\n        if (!this.selectedPatch) {\n            vscode.window.showWarningMessage('No patch selected');\n            return;\n        }\n        try {\n            const res = await this.client.applyPatch(this.selectedPatch);\n            vscode.window.showInformationMessage(res.applied ? 'Patch applied' : 'Patch failed');\n        }\n        catch (error) {\n            vscode.window.showErrorMessage(`Unable to apply patch: ${error?.message ?? error}`);\n        }\n    }\n    render() {\n        if (!this.view) {\n            return;\n        }\n        try {\n            if (this.steps.length === 0) {\n                const body = `\n          <div class=\"plan-placeholder\">\n            <div class=\"card\">\n              <div class=\"h\">Plan &amp; Act</div>\n              <p class=\"lead\">Select an issue from the Agent view to generate an execution plan.</p>\n              <vscode-button id=\"demo-plan\" appearance=\"secondary\">üß™ Load Demo Plan</vscode-button>\n            </div>\n            <ul class=\"how-it-works\">\n              <li>Pick a JIRA issue from the Agent tab</li>\n              <li>AEP drafts a reviewable plan</li>\n              <li>Approve or reject each step</li>\n              <li>Apply AI-generated patches with one click</li>\n            </ul>\n          </div>`;\n                this.view.webview.html = (0, view_1.boilerplate)(this.view.webview, this.ctx, body, ['base.css', 'plan.css'], ['plan.js']);\n                return;\n            }\n            const body = `\n        <div class=\"wrap\">\n          <div class=\"card\"><div class=\"h\">Plan &amp; Act</div></div>\n          <div class=\"steps\">\n            <ul>\n              ${this.steps.map((s, i) => `<li class=\"${i === this.selectedIndex ? 'sel' : ''}\" data-i=\"${i}\">${this.escape(s.kind)}: ${this.escape(s.title)}</li>`).join('')}\n            </ul>\n          </div>\n          <div class=\"details\">\n            ${this.selectedPatch ? `<pre>${this.escape(this.selectedPatch)}</pre>` : '<em>Select a step to inspect details</em>'}\n          </div>\n          <div class=\"actions\">\n            <vscode-button id=\"approve\">Approve</vscode-button>\n            <vscode-button appearance=\"secondary\" id=\"reject\">Reject</vscode-button>\n            <vscode-button id=\"apply\">Apply Patch</vscode-button>\n          </div>\n        </div>`;\n            this.view.webview.html = (0, view_1.boilerplate)(this.view.webview, this.ctx, body, ['base.css', 'plan.css'], ['plan.js']);\n        }\n        catch (error) {\n            this.showError(error);\n        }\n    }\n    escape(text) {\n        return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    }\n    demoPlan() {\n        return [\n            { kind: 'Setup', title: 'Analyze requirements and create project structure', description: 'Analyze requirements and create project structure', status: 'pending', patch: '// Demo patch 1\\n+ Create new component\\n- Remove old file' },\n            { kind: 'Implement', title: 'Implement core functionality', description: 'Implement core functionality', status: 'pending', patch: '// Demo patch 2\\n+ Add main logic\\n+ Update tests' },\n            { kind: 'Validate', title: 'Add error handling and validation', description: 'Add error handling and validation', status: 'pending', patch: '// Demo patch 3\\n+ Try-catch blocks\\n+ Input validation' }\n        ];\n    }\n    showError(error) {\n        if (!this.view) {\n            return;\n        }\n        const message = error instanceof Error ? error.message : String(error);\n        const body = `\n      <div class=\"card error\">\n        <div class=\"h\">We hit a snag</div>\n        <p>${this.escape(message)}</p>\n        <vscode-button id=\"demo-plan\" appearance=\"secondary\">Try Demo Plan</vscode-button>\n      </div>`;\n        this.view.webview.html = (0, view_1.boilerplate)(this.view.webview, this.ctx, body, ['base.css', 'plan.css'], ['plan.js']);\n    }\n}\nexports.PlanPanelProvider = PlanPanelProvider;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boilerplate = boilerplate;\nexports.asset = asset;\nconst vscode = __importStar(require(\"vscode\"));\nfunction boilerplate(view, ctx, body, styles = [], scripts = []) {\n    const nonce = Math.random().toString(36).slice(2);\n    const cssLinks = styles.map(s => `<link rel=\"stylesheet\" href=\"${asset(view, ctx, s)}\">`).join('');\n    const jsLinks = scripts.map(s => `<script nonce=\"${nonce}\" src=\"${asset(view, ctx, s)}\"></script>`).join('');\n    return `<!DOCTYPE html>\n  <html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; img-src ${view.cspSource} https:; style-src ${view.cspSource} 'unsafe-inline'; script-src 'nonce-${nonce}'; font-src ${view.cspSource} https:;\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <link href=\"https://microsoft.github.io/vscode-webview-ui-toolkit/dist/toolkit.min.css\" rel=\"stylesheet\" />\n    ${cssLinks}\n  </head>\n  <body>\n    ${body}\n    ${jsLinks}\n  </body>\n  </html>`;\n}\nfunction asset(view, ctx, pathRel) {\n    return view.asWebviewUri(vscode.Uri.joinPath(ctx.extensionUri, 'media', pathRel));\n}\n","module.exports = require(\"vscode\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/extension.ts\");\n",""],"names":[],"sourceRoot":""}