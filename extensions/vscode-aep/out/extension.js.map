{"version":3,"file":"extension.js","mappings":";;;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,oBAAoB;AACpB;AACA,2CAA2C,WAAW;AACtD;AACA;AACA;AACA,iCAAiC,aAAa,wBAAwB,yCAAyC;AAC/G;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,uBAAuB,gEAAgE,yBAAyB,GAAG;AACjK;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,qCAAqC,yBAAyB;AAC5G;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,uBAAuB,gEAAgE,qBAAqB,GAAG;AAC7J;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,wBAAwB,gEAAgE,6BAA6B,GAAG;AACtK;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;;;;;;;;;;AChDJ;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C,kBAAkB,mBAAO,CAAC,8CAAiB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,SAAS,sCAAsC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;;;;;;AC7Da;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC5Ca;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB,kBAAkB;AAClB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C,qBAAqB,mBAAO,CAAC,mDAAmB;AAChD,sBAAsB,mBAAO,CAAC,6DAAwB;AACtD,oBAAoB,mBAAO,CAAC,yDAAsB;AAClD,oBAAoB,mBAAO,CAAC,yDAAsB;AAClD,iBAAiB,mBAAO,CAAC,yCAAc;AACvC,iBAAiB,mBAAO,CAAC,iCAAU;AACnC;AACA;AACA;AACA;AACA;AACA,0CAA0C,wCAAwC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACpEa;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,0BAA0B,sBAAsB,mCAAmC,0EAA0E,iBAAiB;AAC9K,yBAAyB,sBAAsB;AAC/C,8BAA8B;AAC9B;AACA,6BAA6B;AAC7B;AACA;AACA,iBAAiB;;;;;;;;;;;ACnDJ;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C,eAAe,mBAAO,CAAC,wCAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,wBAAwB;AAC7D;AACA,cAAc,IAAI;AAClB;AACA;AACA,YAAY,iCAAiC,MAAM,OAAO,MAAM,SAAS,WAAW,mBAAmB,SAAS;AAChH;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,uBAAuB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,mBAAmB,yDAAyD,uBAAuB,SAAS,KAAK;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB,qDAAqD;AAClG,OAAO;AACP;AACA;AACA,6BAA6B,kBAAkB;AAC/C,OAAO;AACP,KAAK,IAAI;AACT;AACA;AACA;AACA,2BAA2B;;;;;;;;;;;AC3Gd;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB;AACzB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA,cAAc,uCAAuC,sCAAsC,YAAY,EAAE,IAAI,OAAO,IAAI,QAAQ;AAChI;AACA;AACA;AACA,YAAY,6BAA6B,gCAAgC;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,uBAAuB;AACvC;AACA;AACA;AACA,gBAAgB,yDAAyD,uBAAuB,SAAS,KAAK;AAC9G,gBAAgB,mCAAmC,WAAW,aAAa,aAAa,GAAG;AAC3F;AACA;AACA;AACA;AACA;AACA,yCAAyC,oDAAoD,gBAAgB,6CAA6C,oBAAoB,uBAAuB,IAAI;AACzM,2FAA2F,eAAe;AAC1G,0FAA0F,cAAc;AACxG,yFAAyF,kBAAkB;AAC3G,GAAG,IAAI;AACP;AACA;AACA;AACA,yBAAyB;;;;;;;;;;;ACzHZ;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb,gBAAgB;AAChB;AACA,UAAU;;;;;;;;;;;ACVG;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACVA,mC;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://aep-agent/./src/api/client.ts","webpack://aep-agent/./src/auth/deviceCode.ts","webpack://aep-agent/./src/config.ts","webpack://aep-agent/./src/extension.ts","webpack://aep-agent/./src/features/approvals.ts","webpack://aep-agent/./src/features/chatSidebar.ts","webpack://aep-agent/./src/features/planPanel.ts","webpack://aep-agent/./src/util/storage.ts","webpack://aep-agent/./src/util/time.ts","webpack://aep-agent/external commonjs \"vscode\"","webpack://aep-agent/webpack/bootstrap","webpack://aep-agent/webpack/before-startup","webpack://aep-agent/webpack/startup","webpack://aep-agent/webpack/after-startup"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AEPClient = void 0;\nclass AEPClient {\n    constructor(ctx, baseUrl, orgId) {\n        this.ctx = ctx;\n        this.baseUrl = baseUrl;\n        this.orgId = orgId;\n    }\n    setToken(t) { this.token = t; }\n    headers() {\n        const h = { 'Content-Type': 'application/json', 'X-Org-Id': this.orgId };\n        if (this.token)\n            h['Authorization'] = `Bearer ${this.token}`;\n        return h;\n    }\n    async startDeviceCode() {\n        const r = await fetch(`${this.baseUrl}/oauth/device/start`, { method: 'POST', headers: this.headers() });\n        if (!r.ok)\n            throw new Error(await r.text());\n        return await r.json();\n    }\n    async pollDeviceCode(deviceCode) {\n        const r = await fetch(`${this.baseUrl}/oauth/device/poll`, { method: 'POST', headers: this.headers(), body: JSON.stringify({ device_code: deviceCode }) });\n        if (!r.ok)\n            throw new Error(await r.text());\n        return await r.json();\n    }\n    async listMyJiraIssues() {\n        const r = await fetch(`${this.baseUrl}/api/integrations/jira/my-issues`, { headers: this.headers() });\n        if (!r.ok)\n            return [];\n        return await r.json();\n    }\n    async proposePlan(issueKey) {\n        const r = await fetch(`${this.baseUrl}/api/agent/propose`, { method: 'POST', headers: this.headers(), body: JSON.stringify({ issue_key: issueKey }) });\n        if (!r.ok)\n            throw new Error(await r.text());\n        return await r.json();\n    }\n    async applyPatch(patch) {\n        const r = await fetch(`${this.baseUrl}/api/ai/apply-patch`, { method: 'POST', headers: this.headers(), body: JSON.stringify({ diff: patch, dry_run: false }) });\n        const j = await r.json();\n        if (!r.ok)\n            throw new Error(j.detail || JSON.stringify(j));\n        return j;\n    }\n}\nexports.AEPClient = AEPClient;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ensureAuth = ensureAuth;\nconst vscode = __importStar(require(\"vscode\"));\nconst storage_1 = require(\"../util/storage\");\nasync function ensureAuth(ctx, client) {\n    const kv = new storage_1.KV(ctx);\n    let token = kv.get('aep.token');\n    if (token) {\n        client.setToken(token);\n        return;\n    }\n    const pick = await vscode.window.showQuickPick([\n        { label: 'Device Code', description: 'Open browser and paste code' }\n    ], { placeHolder: 'Choose sign-in method' });\n    if (!pick)\n        return;\n    const flow = await client.startDeviceCode();\n    await vscode.env.openExternal(vscode.Uri.parse(flow.verification_uri_complete || flow.verification_uri));\n    // Show user code for manual entry if needed\n    await vscode.window.showInputBox({\n        prompt: 'Device code (pre-filled, press Enter to continue)',\n        value: flow.user_code,\n        ignoreFocusOut: true\n    });\n    const tok = await client.pollDeviceCode(flow.device_code);\n    await kv.set('aep.token', tok.access_token);\n    client.setToken(tok.access_token);\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getConfig = getConfig;\nconst vscode = __importStar(require(\"vscode\"));\nfunction getConfig() {\n    const c = vscode.workspace.getConfiguration('aep');\n    return {\n        baseUrl: String(c.get('baseUrl')),\n        orgId: String(c.get('orgId')),\n        llm: String(c.get('llm'))\n    };\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.activate = activate;\nexports.deactivate = deactivate;\nconst vscode = __importStar(require(\"vscode\"));\nconst deviceCode_1 = require(\"./auth/deviceCode\");\nconst chatSidebar_1 = require(\"./features/chatSidebar\");\nconst planPanel_1 = require(\"./features/planPanel\");\nconst approvals_1 = require(\"./features/approvals\");\nconst client_1 = require(\"./api/client\");\nconst config_1 = require(\"./config\");\nasync function activate(context) {\n    console.log('ðŸš€ AEP Extension activating...');\n    // Show activation in VS Code\n    vscode.window.showInformationMessage('AEP Extension activated successfully!');\n    const cfg = (0, config_1.getConfig)();\n    console.log('ðŸ“Š Extension config:', { baseUrl: cfg.baseUrl, orgId: cfg.orgId });\n    const client = new client_1.AEPClient(context, cfg.baseUrl, cfg.orgId);\n    const approvals = new approvals_1.Approvals(context, client);\n    const chat = new chatSidebar_1.ChatSidebarProvider(context, client);\n    const plan = new planPanel_1.PlanPanelProvider(context, client, approvals);\n    context.subscriptions.push(vscode.window.registerWebviewViewProvider('aep.chatView', chat), vscode.window.registerWebviewViewProvider('aep.planView', plan), vscode.commands.registerCommand('aep.signIn', async () => {\n        await (0, deviceCode_1.ensureAuth)(context, client);\n        vscode.window.showInformationMessage('AEP: Signed in');\n        chat.refresh();\n        plan.refresh();\n    }), vscode.commands.registerCommand('aep.startSession', async () => {\n        await (0, deviceCode_1.ensureAuth)(context, client);\n        await chat.sendHello();\n    }), vscode.commands.registerCommand('aep.plan.approve', async () => approvals.approveSelected()), vscode.commands.registerCommand('aep.plan.reject', async () => approvals.rejectSelected()), vscode.commands.registerCommand('aep.applyPatch', async () => plan.applySelectedPatch()));\n    console.log('âœ… AEP Extension activated successfully');\n    vscode.window.showInformationMessage('AEP Extension loaded! Check the Activity Bar for AEP icon.');\n}\nfunction deactivate() {\n    console.log('ðŸ›‘ AEP Extension deactivating...');\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Approvals = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nclass Approvals {\n    constructor(ctx, client) {\n        this.ctx = ctx;\n        this.client = client;\n        this.selected = null;\n    }\n    set(step) { this.selected = step; }\n    async approve(step) { this.selected = step; await vscode.window.withProgress({ location: vscode.ProgressLocation.Notification, title: 'Approving stepâ€¦' }, async () => { }); }\n    async reject(step) { this.selected = step; vscode.window.showInformationMessage('Step rejected'); }\n    async approveSelected() { if (this.selected)\n        await this.approve(this.selected); }\n    async rejectSelected() { if (this.selected)\n        await this.reject(this.selected); }\n}\nexports.Approvals = Approvals;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChatSidebarProvider = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst time_1 = require(\"../util/time\");\nclass ChatSidebarProvider {\n    constructor(ctx, client) {\n        this.ctx = ctx;\n        this.client = client;\n    }\n    resolveWebviewView(view) {\n        this.view = view;\n        view.webview.options = { enableScripts: true };\n        this.render();\n    }\n    refresh() { if (this.view)\n        this.render(); }\n    async sendHello() {\n        const issues = await this.client.listMyJiraIssues();\n        this.post({ type: 'hello', issues });\n    }\n    post(message) {\n        if (this.view) {\n            this.view.webview.postMessage(message);\n        }\n    }\n    async render() {\n        const issues = await this.client.listMyJiraIssues();\n        const now = (0, time_1.greeting)();\n        const html = `\n      <link rel=\"stylesheet\" href=\"${this.cssUri('chat.css')}\">\n      <div class=\"wrap\">\n        <h2>${now}! ðŸ‘‹</h2>\n        <p>Select a Jira task to begin, or ask a question.</p>\n        <ul class=\"issues\">\n          ${issues.map(i => `<li data-key=\"${i.key}\"><b>${i.key}</b> â€“ ${i.summary} <span class=\"st\">${i.status}</span></li>`).join('')}\n        </ul>\n        <div class=\"ask\">\n          <input id=\"q\" placeholder=\"Ask the agent about your projectâ€¦\" />\n          <button id=\"ask\">Ask</button>\n        </div>\n      </div>\n      <script>${this.script('chat.js')}</script>\n    `;\n        this.view.webview.html = html;\n        this.view.webview.onDidReceiveMessage(async (m) => {\n            if (m.type === 'pick-issue') {\n                vscode.commands.executeCommand('revealView', 'aep.planView');\n                vscode.commands.executeCommand('aep.startSession');\n            }\n            if (m.type === 'ask') {\n                vscode.window.showInformationMessage('Question sent (wire to backend Q&A endpoint)');\n            }\n        });\n    }\n    cssUri(name) { return this.view.webview.asWebviewUri(vscode.Uri.file(`${this.ctx.extensionPath}/media/${name}`)); }\n    script(name) {\n        // inline minimal script for MVP\n        if (name === 'chat.js')\n            return `(() => {\n      const vscode = acquireVsCodeApi();\n      const ul = document.querySelector('.issues');\n      ul?.addEventListener('click', (e)=>{\n        const li = (e.target as HTMLElement).closest('li');\n        if(!li) return; vscode.postMessage({ type:'pick-issue', key: li.getAttribute('data-key') });\n      });\n      document.getElementById('ask')?.addEventListener('click', ()=>{\n        const v = (document.getElementById('q') as HTMLInputElement).value;\n        vscode.postMessage({ type:'ask', q: v });\n      });\n    })();`;\n        return '';\n    }\n}\nexports.ChatSidebarProvider = ChatSidebarProvider;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PlanPanelProvider = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nclass PlanPanelProvider {\n    constructor(ctx, client, approvals) {\n        this.ctx = ctx;\n        this.client = client;\n        this.approvals = approvals;\n        this.steps = [];\n        this.selectedIndex = 0;\n        this.selectedPatch = null;\n    }\n    resolveWebviewView(view) {\n        this.view = view;\n        view.webview.options = { enableScripts: true };\n        this.render();\n        view.webview.onDidReceiveMessage(async (m) => {\n            if (m.type === 'load-plan' && m.issue) {\n                this.steps = await this.client.proposePlan(m.issue);\n                this.selectedIndex = 0;\n                this.selectedPatch = this.steps[0]?.patch || null;\n                this.render();\n            }\n            if (m.type === 'select' && typeof m.index === 'number') {\n                this.selectedIndex = m.index;\n                this.selectedPatch = this.steps[m.index]?.patch || null;\n                this.render();\n            }\n            if (m.type === 'approve') {\n                this.approvals.approve(this.steps[this.selectedIndex]);\n            }\n            if (m.type === 'reject') {\n                this.approvals.reject(this.steps[this.selectedIndex]);\n            }\n            if (m.type === 'applyPatch') {\n                vscode.commands.executeCommand('aep.applyPatch');\n            }\n        });\n    }\n    refresh() { if (this.view)\n        this.render(); }\n    async applySelectedPatch() {\n        if (!this.selectedPatch) {\n            vscode.window.showWarningMessage('No patch selected');\n            return;\n        }\n        const res = await this.client.applyPatch(this.selectedPatch);\n        vscode.window.showInformationMessage(res.applied ? 'Patch applied' : 'Patch failed');\n    }\n    render() {\n        const html = `\n      <link rel=\"stylesheet\" href=\"${this.css('plan.css')}\">\n      <div class=\"wrap\">\n        <h3>Plan & Act</h3>\n        <div class=\"steps\">\n          <ul>\n            ${this.steps.map((s, i) => `<li class=\"${i === this.selectedIndex ? 'sel' : ''}\" data-i=\"${i}\">${s.kind}: ${s.title}</li>`).join('')}\n          </ul>\n        </div>\n        <div class=\"details\">\n          ${this.selectedPatch ? `<pre>${this.escape(this.selectedPatch)}</pre>` : '<em>Select a step</em>'}\n        </div>\n        <div class=\"actions\">\n          <button id=\"approve\">Approve</button>\n          <button id=\"reject\">Reject</button>\n          <button id=\"apply\">Apply Patch</button>\n        </div>\n      </div>\n      <script>${this.script('plan.js')}</script>\n    `;\n        this.view.webview.html = html;\n    }\n    css(name) { return this.view.webview.asWebviewUri(vscode.Uri.file(`${this.ctx.extensionPath}/media/${name}`)); }\n    escape(s) { return s.replace(/[&<>]/g, c => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;' }[c])); }\n    script(name) {\n        if (name === 'plan.js')\n            return `(() => {\n    const vscode = acquireVsCodeApi();\n    const ul = document.querySelector('.steps ul');\n    ul?.addEventListener('click', (e)=>{ const li = (e.target as HTMLElement).closest('li'); if(!li) return; const i = Number(li.getAttribute('data-i')); vscode.postMessage({type:'select', index:i}); });\n    document.getElementById('approve')?.addEventListener('click', ()=> vscode.postMessage({type:'approve'}));\n    document.getElementById('reject')?.addEventListener('click', ()=> vscode.postMessage({type:'reject'}));\n    document.getElementById('apply')?.addEventListener('click', ()=> vscode.postMessage({type:'applyPatch'}));\n  })();`;\n        return '';\n    }\n}\nexports.PlanPanelProvider = PlanPanelProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KV = void 0;\nclass KV {\n    constructor(ctx) {\n        this.ctx = ctx;\n    }\n    get(k) { return this.ctx.globalState.get(k); }\n    set(k, v) { return this.ctx.globalState.update(k, v); }\n}\nexports.KV = KV;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.greeting = greeting;\nfunction greeting(now = new Date()) {\n    const h = now.getHours();\n    if (h < 12)\n        return 'Good morning';\n    if (h < 18)\n        return 'Good afternoon';\n    return 'Good evening';\n}\n","module.exports = require(\"vscode\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/extension.ts\");\n",""],"names":[],"sourceRoot":""}