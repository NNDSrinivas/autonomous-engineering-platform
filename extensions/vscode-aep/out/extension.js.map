{"version":3,"file":"extension.js","mappings":";;;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,oBAAoB;AACpB;AACA,2CAA2C,WAAW;AACtD;AACA;AACA;AACA,iCAAiC,aAAa,wBAAwB,yCAAyC;AAC/G;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,uBAAuB,gEAAgE,yBAAyB,GAAG;AACjK;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,qCAAqC,yBAAyB;AAC5G;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,uBAAuB,gEAAgE,qBAAqB,GAAG;AAC7J;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa,wBAAwB,gEAAgE,6BAA6B,GAAG;AACtK;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;;;;;;;;;;AChDJ;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C,kBAAkB,mBAAO,CAAC,8CAAiB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,SAAS,sCAAsC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;;;;;;AC7Da;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC5Ca;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB,kBAAkB;AAClB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C,qBAAqB,mBAAO,CAAC,mDAAmB;AAChD,sBAAsB,mBAAO,CAAC,6DAAwB;AACtD,oBAAoB,mBAAO,CAAC,yDAAsB;AAClD,oBAAoB,mBAAO,CAAC,yDAAsB;AAClD,iBAAiB,mBAAO,CAAC,yCAAc;AACvC,iBAAiB,mBAAO,CAAC,iCAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,8CAA8C,wCAAwC;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,MAAM;AAClF;AACA;AACA;AACA;AACA;;;;;;;;;;;AC9Ga;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,0BAA0B,sBAAsB,mCAAmC,0EAA0E,iBAAiB;AAC9K,yBAAyB,sBAAsB;AAC/C,8BAA8B;AAC9B;AACA,6BAA6B;AAC7B;AACA;AACA,iBAAiB;;;;;;;;;;;ACnDJ;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C,eAAe,mBAAO,CAAC,wCAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,8CAA8C;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,IAAI;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA,UAAU;AACV;AACA,cAAc;AACd,iDAAiD,UAAU,0BAA0B,UAAU;AAC/F;AACA,4CAA4C,UAAU;AACtD,+CAA+C,aAAa;AAC5D;AACA,2CAA2C,cAAc;AACzD;AACA,iCAAiC,SAAS;AAC1C,qCAAqC,aAAa;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA,2BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gCAAgC;AAC7D;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,wCAAwC,iCAAiC,6CAA6C;AACjI,YAAY;AACZ,SAAS,iCAAiC;AAC1C,QAAQ,4CAA4C;AACpD,qBAAqB,oBAAoB,6CAA6C,wCAAwC,cAAc,oBAAoB,iBAAiB;AACjL,2BAA2B;AAC3B,cAAc,kBAAkB,eAAe,qDAAqD,4DAA4D;AAChK,aAAa,sCAAsC,wBAAwB,iBAAiB;AAC5F;AACA;AACA;AACA;AACA,QAAQ,IAAI;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,uDAAuD;AACvF;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gBAAgB;AACzC,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,MAAM;AAC9E;AACA;AACA,kEAAkE,WAAW;AAC7E;AACA;AACA;AACA;AACA;AACA,mFAAmF,UAAU;AAC7F;AACA,SAAS;AACT;AACA,mBAAmB,yDAAyD,uBAAuB,SAAS,KAAK;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB,qDAAqD;AAClG,OAAO;AACP;AACA;AACA,6BAA6B,kBAAkB;AAC/C,OAAO;AACP,KAAK,IAAI;AACT;AACA;AACA;AACA,2BAA2B;;;;;;;;;;;AC3nBd;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB;AACzB,4BAA4B,mBAAO,CAAC,sBAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wBAAwB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,0JAA0J;AAChL,sBAAsB,4HAA4H;AAClJ,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,wCAAwC,iCAAiC,6CAA6C;AACjI,YAAY;AACZ,SAAS,iCAAiC;AAC1C,QAAQ,4CAA4C;AACpD,mBAAmB,oBAAoB,oBAAoB,iDAAiD,oBAAoB;AAChI,sBAAsB,qBAAqB;AAC3C,oBAAoB,gDAAgD,eAAe,eAAe,oBAAoB,iBAAiB;AACvI,0BAA0B;AAC1B,aAAa,mBAAmB,6CAA6C,wCAAwC,cAAc,oBAAoB,iBAAiB;AACxK,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,mCAAmC,sBAAsB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wBAAwB;AACjD,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,wCAAwC,iCAAiC,6CAA6C;AACjI,YAAY;AACZ,SAAS,iCAAiC;AAC1C,aAAa,kBAAkB;AAC/B,YAAY,gDAAgD,eAAe,eAAe,oBAAoB,iBAAiB;AAC/H,qBAAqB,0DAA0D;AAC/E,kBAAkB;AAClB,eAAe,kBAAkB,eAAe,UAAU;AAC1D,aAAa,mBAAmB,6CAA6C,wCAAwC,cAAc,oBAAoB;AACvJ,mBAAmB;AACnB,qBAAqB;AACrB,oBAAoB;AACpB,aAAa,kBAAkB,eAAe,oDAAoD,oBAAoB,wBAAwB,iBAAiB,mBAAmB,kBAAkB;AACpM;AACA;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA,MAAM;AACN,wBAAwB,2CAA2C,gBAAgB,EAAE;AACrF,uBAAuB,MAAM,aAAa;AAC1C,UAAU,0CAA0C,2CAA2C,IAAI,YAAY;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,IAAI,oFAAoF,qCAAqC,EAAE,6CAA6C;AAC5K;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD,KAAK;AACL,GAAG;AACH;AACA,yBAAyB,iBAAiB;AAC1C,GAAG;AACH;AACA,yBAAyB,gBAAgB;AACzC,GAAG;AACH;AACA,yBAAyB,oBAAoB;AAC7C,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;;;;;;;;;;;AC9QZ;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa;AACb,gBAAgB;AAChB;AACA,UAAU;;;;;;;;;;;ACVG;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACVA,mC;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://aep-agent/./src/api/client.ts","webpack://aep-agent/./src/auth/deviceCode.ts","webpack://aep-agent/./src/config.ts","webpack://aep-agent/./src/extension.ts","webpack://aep-agent/./src/features/approvals.ts","webpack://aep-agent/./src/features/chatSidebar.ts","webpack://aep-agent/./src/features/planPanel.ts","webpack://aep-agent/./src/util/storage.ts","webpack://aep-agent/./src/util/time.ts","webpack://aep-agent/external commonjs \"vscode\"","webpack://aep-agent/webpack/bootstrap","webpack://aep-agent/webpack/before-startup","webpack://aep-agent/webpack/startup","webpack://aep-agent/webpack/after-startup"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AEPClient = void 0;\nclass AEPClient {\n    constructor(ctx, baseUrl, orgId) {\n        this.ctx = ctx;\n        this.baseUrl = baseUrl;\n        this.orgId = orgId;\n    }\n    setToken(t) { this.token = t; }\n    headers() {\n        const h = { 'Content-Type': 'application/json', 'X-Org-Id': this.orgId };\n        if (this.token)\n            h['Authorization'] = `Bearer ${this.token}`;\n        return h;\n    }\n    async startDeviceCode() {\n        const r = await fetch(`${this.baseUrl}/oauth/device/start`, { method: 'POST', headers: this.headers() });\n        if (!r.ok)\n            throw new Error(await r.text());\n        return await r.json();\n    }\n    async pollDeviceCode(deviceCode) {\n        const r = await fetch(`${this.baseUrl}/oauth/device/poll`, { method: 'POST', headers: this.headers(), body: JSON.stringify({ device_code: deviceCode }) });\n        if (!r.ok)\n            throw new Error(await r.text());\n        return await r.json();\n    }\n    async listMyJiraIssues() {\n        const r = await fetch(`${this.baseUrl}/api/integrations/jira/my-issues`, { headers: this.headers() });\n        if (!r.ok)\n            return [];\n        return await r.json();\n    }\n    async proposePlan(issueKey) {\n        const r = await fetch(`${this.baseUrl}/api/agent/propose`, { method: 'POST', headers: this.headers(), body: JSON.stringify({ issue_key: issueKey }) });\n        if (!r.ok)\n            throw new Error(await r.text());\n        return await r.json();\n    }\n    async applyPatch(patch) {\n        const r = await fetch(`${this.baseUrl}/api/ai/apply-patch`, { method: 'POST', headers: this.headers(), body: JSON.stringify({ diff: patch, dry_run: false }) });\n        const j = await r.json();\n        if (!r.ok)\n            throw new Error(j.detail || JSON.stringify(j));\n        return j;\n    }\n}\nexports.AEPClient = AEPClient;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ensureAuth = ensureAuth;\nconst vscode = __importStar(require(\"vscode\"));\nconst storage_1 = require(\"../util/storage\");\nasync function ensureAuth(ctx, client) {\n    const kv = new storage_1.KV(ctx);\n    let token = kv.get('aep.token');\n    if (token) {\n        client.setToken(token);\n        return;\n    }\n    const pick = await vscode.window.showQuickPick([\n        { label: 'Device Code', description: 'Open browser and paste code' }\n    ], { placeHolder: 'Choose sign-in method' });\n    if (!pick)\n        return;\n    const flow = await client.startDeviceCode();\n    await vscode.env.openExternal(vscode.Uri.parse(flow.verification_uri_complete || flow.verification_uri));\n    // Show user code for manual entry if needed\n    await vscode.window.showInputBox({\n        prompt: 'Device code (pre-filled, press Enter to continue)',\n        value: flow.user_code,\n        ignoreFocusOut: true\n    });\n    const tok = await client.pollDeviceCode(flow.device_code);\n    await kv.set('aep.token', tok.access_token);\n    client.setToken(tok.access_token);\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getConfig = getConfig;\nconst vscode = __importStar(require(\"vscode\"));\nfunction getConfig() {\n    const c = vscode.workspace.getConfiguration('aep');\n    return {\n        baseUrl: String(c.get('baseUrl')),\n        orgId: String(c.get('orgId')),\n        llm: String(c.get('llm'))\n    };\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.activate = activate;\nexports.deactivate = deactivate;\nconst vscode = __importStar(require(\"vscode\"));\nconst deviceCode_1 = require(\"./auth/deviceCode\");\nconst chatSidebar_1 = require(\"./features/chatSidebar\");\nconst planPanel_1 = require(\"./features/planPanel\");\nconst approvals_1 = require(\"./features/approvals\");\nconst client_1 = require(\"./api/client\");\nconst config_1 = require(\"./config\");\nasync function activate(context) {\n    console.log('üöÄ AEP Extension activating...');\n    console.log('üîç Extension context:', {\n        globalState: Object.keys(context.globalState.keys()),\n        workspaceState: Object.keys(context.workspaceState.keys()),\n        subscriptions: context.subscriptions.length\n    });\n    // Show immediate activation confirmation\n    vscode.window.showInformationMessage('üöÄ AEP Extension is ACTIVATING...', 'Show Console').then(selection => {\n        if (selection === 'Show Console') {\n            vscode.commands.executeCommand('workbench.action.toggleDevTools');\n        }\n    });\n    try {\n        // Show activation in VS Code\n        vscode.window.showInformationMessage('AEP Extension activated successfully!');\n        const cfg = (0, config_1.getConfig)();\n        console.log('üìä Extension config:', { baseUrl: cfg.baseUrl, orgId: cfg.orgId });\n        const client = new client_1.AEPClient(context, cfg.baseUrl, cfg.orgId);\n        const approvals = new approvals_1.Approvals(context, client);\n        const chat = new chatSidebar_1.ChatSidebarProvider(context, client);\n        const plan = new planPanel_1.PlanPanelProvider(context, client, approvals);\n        console.log('üîß Registering webview providers...');\n        console.log('üéØ About to register:', {\n            chatProviderInstance: !!chat,\n            planProviderInstance: !!plan,\n            vscodeWindow: !!vscode.window\n        });\n        const chatProvider = vscode.window.registerWebviewViewProvider('aep.chatView', chat);\n        const planProvider = vscode.window.registerWebviewViewProvider('aep.planView', plan);\n        console.log('üìã Registered providers:', {\n            chatView: 'aep.chatView',\n            planView: 'aep.planView',\n            chatDisposable: !!chatProvider,\n            planDisposable: !!planProvider\n        });\n        context.subscriptions.push(chatProvider, planProvider, vscode.commands.registerCommand('aep.signIn', async () => {\n            await (0, deviceCode_1.ensureAuth)(context, client);\n            vscode.window.showInformationMessage('AEP: Signed in');\n            chat.refresh();\n            plan.refresh();\n        }), vscode.commands.registerCommand('aep.startSession', async () => {\n            await (0, deviceCode_1.ensureAuth)(context, client);\n            await chat.sendHello();\n        }), vscode.commands.registerCommand('aep.plan.approve', async () => approvals.approveSelected()), vscode.commands.registerCommand('aep.plan.reject', async () => approvals.rejectSelected()), vscode.commands.registerCommand('aep.applyPatch', async () => plan.applySelectedPatch()), \n        // Debug command to test webview providers\n        vscode.commands.registerCommand('aep.debug.testWebviews', async () => {\n            console.log('üß™ Testing webview providers...');\n            vscode.window.showInformationMessage('Testing webview providers - check console');\n            // Force refresh webviews\n            chat.refresh();\n            plan.refresh();\n            // Try to focus on the AEP views\n            await vscode.commands.executeCommand('workbench.view.extension.aep');\n        }));\n        console.log('‚úÖ AEP Extension activated successfully');\n        console.log('Setting up vscode host providers...');\n        vscode.window.showInformationMessage('AEP Extension loaded! Check the Activity Bar for AEP icon.');\n    }\n    catch (error) {\n        console.error('‚ùå AEP Extension activation failed:', error);\n        vscode.window.showErrorMessage(`AEP Extension failed to activate: ${error}`);\n    }\n}\nfunction deactivate() {\n    console.log('üõë AEP Extension deactivating...');\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Approvals = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nclass Approvals {\n    constructor(ctx, client) {\n        this.ctx = ctx;\n        this.client = client;\n        this.selected = null;\n    }\n    set(step) { this.selected = step; }\n    async approve(step) { this.selected = step; await vscode.window.withProgress({ location: vscode.ProgressLocation.Notification, title: 'Approving step‚Ä¶' }, async () => { }); }\n    async reject(step) { this.selected = step; vscode.window.showInformationMessage('Step rejected'); }\n    async approveSelected() { if (this.selected)\n        await this.approve(this.selected); }\n    async rejectSelected() { if (this.selected)\n        await this.reject(this.selected); }\n}\nexports.Approvals = Approvals;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChatSidebarProvider = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nconst time_1 = require(\"../util/time\");\nclass ChatSidebarProvider {\n    constructor(ctx, client) {\n        this.ctx = ctx;\n        this.client = client;\n    }\n    resolveWebviewView(view) {\n        console.log('üîß ChatSidebarProvider resolveWebviewView called');\n        console.log('üîç Webview details:', {\n            viewType: view.viewType,\n            title: view.title,\n            description: view.description\n        });\n        try {\n            this.view = view;\n            view.webview.options = { enableScripts: true };\n            // Immediately set simple HTML to test\n            view.webview.html = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <style>\n    body { \n      font-family: var(--vscode-font-family); \n      color: var(--vscode-foreground); \n      background: var(--vscode-editor-background); \n      margin: 16px; \n      padding: 16px;\n    }\n    .test-message { \n      background: var(--vscode-textBlockQuote-background); \n      padding: 16px; \n      border-radius: 8px; \n      border-left: 4px solid var(--vscode-focusBorder);\n      margin-bottom: 16px;\n    }\n    button { \n      padding: 8px 16px; \n      background: var(--vscode-button-background); \n      color: var(--vscode-button-foreground); \n      border: none; \n      border-radius: 4px; \n      cursor: pointer; \n    }\n  </style>\n</head>\n<body>\n  <div class=\"test-message\">\n    <h3>üöÄ AEP Agent - Connection Test</h3>\n    <p>This is a test to verify the webview is working properly.</p>\n    <button onclick=\"testMessage()\">Test Message</button>\n  </div>\n  <script>\n    const vscode = acquireVsCodeApi();\n    function testMessage() {\n      vscode.postMessage({ type: 'test', message: 'Hello from webview!' });\n    }\n  </script>\n</body>\n</html>`;\n            console.log('‚úÖ ChatSidebarProvider webview HTML set successfully');\n            // Then call the full render\n            setTimeout(() => {\n                this.render();\n            }, 1000);\n        }\n        catch (error) {\n            console.error('‚ùå ChatSidebarProvider resolveWebviewView failed:', error);\n        }\n    }\n    refresh() { if (this.view)\n        this.render(); }\n    async sendHello() {\n        const issues = await this.client.listMyJiraIssues();\n        this.post({ type: 'hello', issues });\n    }\n    post(message) {\n        if (this.view) {\n            this.view.webview.postMessage(message);\n        }\n    }\n    async render() {\n        const now = (0, time_1.greeting)();\n        console.log('üé® ChatSidebarProvider render() called');\n        try {\n            console.log('üîç Attempting to fetch JIRA issues...');\n            const issues = await this.client.listMyJiraIssues();\n            console.log('‚úÖ Successfully fetched issues:', issues.length);\n            const html = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>AEP Agent</title>\n  <style>\n    :root {\n      --vscode-button-primary-background: #0e639c;\n      --vscode-button-primary-foreground: #ffffff;\n      --vscode-button-primary-hoverBackground: #1177bb;\n      --border-radius: 6px;\n      --spacing-xs: 4px;\n      --spacing-sm: 8px;\n      --spacing-md: 12px;\n      --spacing-lg: 16px;\n      --spacing-xl: 24px;\n    }\n    \n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n    \n    body {\n      font-family: var(--vscode-font-family);\n      color: var(--vscode-foreground);\n      background: var(--vscode-editor-background);\n      line-height: 1.4;\n      font-size: 13px;\n    }\n    \n    .container {\n      padding: var(--spacing-lg);\n      height: 100vh;\n      display: flex;\n      flex-direction: column;\n    }\n    \n    .header {\n      margin-bottom: var(--spacing-xl);\n    }\n    \n    .welcome-section {\n      background: var(--vscode-textBlockQuote-background);\n      border-left: 3px solid var(--vscode-focusBorder);\n      padding: var(--spacing-lg);\n      border-radius: var(--border-radius);\n      margin-bottom: var(--spacing-xl);\n    }\n    \n    .welcome-title {\n      font-size: 16px;\n      font-weight: 600;\n      margin-bottom: var(--spacing-sm);\n      display: flex;\n      align-items: center;\n      gap: var(--spacing-sm);\n    }\n    \n    .status-indicator {\n      width: 8px;\n      height: 8px;\n      border-radius: 50%;\n      background: #22c55e;\n      animation: pulse 2s infinite;\n    }\n    \n    .welcome-subtitle {\n      color: var(--vscode-descriptionForeground);\n      font-size: 12px;\n      margin-bottom: var(--spacing-md);\n    }\n    \n    .quick-actions {\n      display: flex;\n      gap: var(--spacing-sm);\n      flex-wrap: wrap;\n    }\n    \n    .btn {\n      padding: var(--spacing-sm) var(--spacing-md);\n      border: none;\n      border-radius: var(--border-radius);\n      cursor: pointer;\n      font-size: 12px;\n      font-weight: 500;\n      transition: all 0.2s ease;\n      display: flex;\n      align-items: center;\n      gap: var(--spacing-xs);\n    }\n    \n    .btn-primary {\n      background: var(--vscode-button-primary-background);\n      color: var(--vscode-button-primary-foreground);\n    }\n    \n    .btn-primary:hover {\n      background: var(--vscode-button-primary-hoverBackground);\n    }\n    \n    .btn-secondary {\n      background: var(--vscode-button-secondaryBackground);\n      color: var(--vscode-button-secondaryForeground);\n      border: 1px solid var(--vscode-contrastBorder);\n    }\n    \n    .btn-secondary:hover {\n      background: var(--vscode-button-secondaryHoverBackground);\n    }\n    \n    .section {\n      margin-bottom: var(--spacing-xl);\n    }\n    \n    .section-title {\n      font-size: 14px;\n      font-weight: 600;\n      margin-bottom: var(--spacing-md);\n      display: flex;\n      align-items: center;\n      gap: var(--spacing-sm);\n    }\n    \n    .issues-container {\n      flex: 1;\n      overflow-y: auto;\n    }\n    \n    .issues-list {\n      list-style: none;\n      gap: var(--spacing-sm);\n      display: flex;\n      flex-direction: column;\n    }\n    \n    .issue-item {\n      background: var(--vscode-list-hoverBackground);\n      border: 1px solid var(--vscode-contrastBorder);\n      border-radius: var(--border-radius);\n      padding: var(--spacing-md);\n      cursor: pointer;\n      transition: all 0.2s ease;\n      position: relative;\n    }\n    \n    .issue-item:hover {\n      background: var(--vscode-list-activeSelectionBackground);\n      border-color: var(--vscode-focusBorder);\n      transform: translateY(-1px);\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    }\n    \n    .issue-header {\n      display: flex;\n      justify-content: between;\n      align-items: flex-start;\n      gap: var(--spacing-sm);\n      margin-bottom: var(--spacing-xs);\n    }\n    \n    .issue-key {\n      background: var(--vscode-badge-background);\n      color: var(--vscode-badge-foreground);\n      padding: 2px 6px;\n      border-radius: 3px;\n      font-size: 10px;\n      font-weight: 600;\n      letter-spacing: 0.5px;\n    }\n    \n    .issue-status {\n      background: var(--vscode-statusBar-background);\n      color: var(--vscode-statusBar-foreground);\n      padding: 2px 6px;\n      border-radius: 3px;\n      font-size: 10px;\n      margin-left: auto;\n    }\n    \n    .issue-title {\n      font-weight: 500;\n      font-size: 13px;\n      line-height: 1.3;\n      margin-bottom: var(--spacing-xs);\n    }\n    \n    .issue-meta {\n      display: flex;\n      align-items: center;\n      gap: var(--spacing-md);\n      font-size: 11px;\n      color: var(--vscode-descriptionForeground);\n    }\n    \n    .chat-input-section {\n      margin-top: auto;\n      padding-top: var(--spacing-lg);\n      border-top: 1px solid var(--vscode-contrastBorder);\n    }\n    \n    .input-container {\n      display: flex;\n      gap: var(--spacing-sm);\n      align-items: flex-end;\n    }\n    \n    .chat-input {\n      flex: 1;\n      background: var(--vscode-input-background);\n      color: var(--vscode-input-foreground);\n      border: 1px solid var(--vscode-input-border);\n      border-radius: var(--border-radius);\n      padding: var(--spacing-md);\n      font-family: inherit;\n      font-size: 13px;\n      resize: vertical;\n      min-height: 40px;\n      max-height: 120px;\n    }\n    \n    .chat-input:focus {\n      outline: none;\n      border-color: var(--vscode-focusBorder);\n      box-shadow: 0 0 0 1px var(--vscode-focusBorder);\n    }\n    \n    .chat-input::placeholder {\n      color: var(--vscode-input-placeholderForeground);\n    }\n    \n    .send-btn {\n      background: var(--vscode-button-primary-background);\n      color: var(--vscode-button-primary-foreground);\n      border: none;\n      border-radius: var(--border-radius);\n      padding: var(--spacing-md);\n      cursor: pointer;\n      transition: all 0.2s ease;\n      min-width: 40px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    \n    .send-btn:hover:not(:disabled) {\n      background: var(--vscode-button-primary-hoverBackground);\n    }\n    \n    .send-btn:disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n    }\n    \n    .empty-state {\n      text-align: center;\n      padding: var(--spacing-xl);\n      color: var(--vscode-descriptionForeground);\n    }\n    \n    .empty-state-icon {\n      font-size: 32px;\n      margin-bottom: var(--spacing-md);\n      opacity: 0.5;\n    }\n    \n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n    \n    .tooltip {\n      position: relative;\n    }\n    \n    .tooltip:hover::after {\n      content: attr(data-tooltip);\n      position: absolute;\n      bottom: 100%;\n      left: 50%;\n      transform: translateX(-50%);\n      background: var(--vscode-editorHoverWidget-background);\n      color: var(--vscode-editorHoverWidget-foreground);\n      padding: 4px 8px;\n      border-radius: 4px;\n      font-size: 11px;\n      white-space: nowrap;\n      z-index: 1000;\n      border: 1px solid var(--vscode-contrastBorder);\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <div class=\"welcome-section\">\n        <div class=\"welcome-title\">\n          <span class=\"status-indicator\"></span>\n          ${now}! Welcome to AEP Agent\n        </div>\n        <div class=\"welcome-subtitle\">\n          Your AI-powered development assistant is ready to help\n        </div>\n        <div class=\"quick-actions\">\n          <button class=\"btn btn-primary\" onclick=\"signIn()\">\n            üîë Sign In\n          </button>\n          <button class=\"btn btn-secondary\" onclick=\"startSession()\">\n            üöÄ Start Session\n          </button>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"section\">\n      <div class=\"section-title\">\n        üìã Available Issues (${issues.length})\n      </div>\n      <div class=\"issues-container\">\n        ${issues.length > 0 ? `\n          <ul class=\"issues-list\">\n            ${issues.map(issue => `\n              <li class=\"issue-item\" data-key=\"${issue.key}\" onclick=\"selectIssue('${issue.key}')\">\n                <div class=\"issue-header\">\n                  <span class=\"issue-key\">${issue.key}</span>\n                  <span class=\"issue-status\">${issue.status}</span>\n                </div>\n                <div class=\"issue-title\">${issue.summary}</div>\n                <div class=\"issue-meta\">\n                  <span>üîó ID: ${issue.id}</span>\n                  <span>üìã Status: ${issue.status}</span>\n                </div>\n              </li>\n            `).join('')}\n          </ul>\n        ` : `\n          <div class=\"empty-state\">\n            <div class=\"empty-state-icon\">üìù</div>\n            <div>No issues found. Sign in to load your JIRA issues.</div>\n          </div>\n        `}\n      </div>\n    </div>\n    \n    <div class=\"chat-input-section\">\n      <div class=\"input-container\">\n        <textarea \n          class=\"chat-input\" \n          id=\"chatInput\"\n          placeholder=\"Ask the agent about your project, request code analysis, or get help with implementation...\"\n          rows=\"2\"\n        ></textarea>\n        <button class=\"send-btn tooltip\" data-tooltip=\"Send message\" onclick=\"sendMessage()\" id=\"sendBtn\">\n          ‚û§\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    const vscode = acquireVsCodeApi();\n    \n    function signIn() {\n      vscode.postMessage({ type: 'signin' });\n    }\n    \n    function startSession() {\n      vscode.postMessage({ type: 'start-session' });\n    }\n    \n    function selectIssue(key) {\n      vscode.postMessage({ type: 'selectIssue', key });\n      \n      // Visual feedback\n      document.querySelectorAll('.issue-item').forEach(item => {\n        item.style.background = 'var(--vscode-list-hoverBackground)';\n      });\n      event.target.closest('.issue-item').style.background = 'var(--vscode-list-activeSelectionBackground)';\n    }\n    \n    function sendMessage() {\n      const input = document.getElementById('chatInput');\n      const message = input.value.trim();\n      \n      if (message) {\n        vscode.postMessage({ type: 'ask', question: message });\n        input.value = '';\n        input.style.height = '40px'; // Reset height\n        updateSendButton();\n      }\n    }\n    \n    function updateSendButton() {\n      const input = document.getElementById('chatInput');\n      const sendBtn = document.getElementById('sendBtn');\n      sendBtn.disabled = !input.value.trim();\n    }\n    \n    // Auto-resize textarea\n    document.getElementById('chatInput').addEventListener('input', function() {\n      this.style.height = '40px';\n      this.style.height = Math.min(this.scrollHeight, 120) + 'px';\n      updateSendButton();\n    });\n    \n    // Enter to send (Shift+Enter for new line)\n    document.getElementById('chatInput').addEventListener('keydown', function(e) {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        sendMessage();\n      }\n    });\n    \n    // Initialize\n    updateSendButton();\n  </script>\n</body>\n</html>`;\n            this.view.webview.html = html;\n        }\n        catch (error) {\n            console.warn('‚ö†Ô∏è Could not fetch issues, showing sign-in UI:', error);\n            // Show sign-in UI when not authenticated or backend not available\n            const html = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <style>\n    body { font-family: var(--vscode-font-family); color: var(--vscode-foreground); background: var(--vscode-editor-background); margin: 16px; }\n    .wrap { max-width: 400px; }\n    h2 { color: var(--vscode-foreground); margin-bottom: 16px; }\n    p { color: var(--vscode-descriptionForeground); margin-bottom: 16px; }\n    .signin button { padding: 12px 24px; background: var(--vscode-button-background); color: var(--vscode-button-foreground); border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }\n    .signin button:hover { background: var(--vscode-button-hoverBackground); }\n    .status { margin-top: 16px; padding: 12px; background: var(--vscode-textBlockQuote-background); border-left: 4px solid var(--vscode-textBlockQuote-border); border-radius: 4px; }\n    .error { color: var(--vscode-errorForeground); font-family: monospace; font-size: 12px; margin-top: 8px; }\n  </style>\n</head>\n<body>\n<div class=\"wrap\">\n  <h2>${now}! üëã</h2>\n  <p>Welcome to AEP Agent! Please sign in to get started.</p>\n  <div class=\"signin\">\n    <button id=\"signin\">üîë Sign In to AEP</button>\n  </div>\n  <div class=\"status\">\n    <p><strong>Status:</strong> <span id=\"status\">Not authenticated</span></p>\n    <div class=\"error\">Error: ${error instanceof Error ? error.message : String(error)}</div>\n  </div>\n  <div style=\"margin-top: 20px;\">\n    <p><strong>Getting Started:</strong></p>\n    <ol>\n      <li>Click \"Sign In to AEP\" above</li>\n      <li>Complete the OAuth flow</li>\n      <li>Start working with JIRA issues</li>\n    </ol>\n  </div>\n</div>\n<script>\n  const vscode = acquireVsCodeApi();\n  document.getElementById('signin')?.addEventListener('click', () => {\n    vscode.postMessage({ type: 'signin' });\n  });\n</script>\n</body>\n</html>`;\n            this.view.webview.html = html;\n        }\n        // Set up message handling\n        this.view.webview.onDidReceiveMessage(async (m) => {\n            console.log('üì® ChatSidebar received message:', m);\n            if (m.type === 'selectIssue') {\n                vscode.commands.executeCommand('workbench.view.extension.aep');\n                vscode.window.showInformationMessage(`Selected issue: ${m.key}`);\n            }\n            if (m.type === 'ask') {\n                vscode.window.showInformationMessage(`Question: ${m.question}`);\n            }\n            if (m.type === 'signin') {\n                vscode.commands.executeCommand('aep.signIn');\n            }\n            if (m.type === 'test') {\n                vscode.window.showInformationMessage(`‚úÖ Webview test successful: ${m.message}`);\n            }\n        });\n    }\n    cssUri(name) { return this.view.webview.asWebviewUri(vscode.Uri.file(`${this.ctx.extensionPath}/media/${name}`)); }\n    script(name) {\n        // inline minimal script for MVP\n        if (name === 'chat.js')\n            return `(() => {\n      const vscode = acquireVsCodeApi();\n      const ul = document.querySelector('.issues');\n      ul?.addEventListener('click', (e)=>{\n        const li = (e.target as HTMLElement).closest('li');\n        if(!li) return; vscode.postMessage({ type:'pick-issue', key: li.getAttribute('data-key') });\n      });\n      document.getElementById('ask')?.addEventListener('click', ()=>{\n        const v = (document.getElementById('q') as HTMLInputElement).value;\n        vscode.postMessage({ type:'ask', q: v });\n      });\n    })();`;\n        return '';\n    }\n}\nexports.ChatSidebarProvider = ChatSidebarProvider;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PlanPanelProvider = void 0;\nconst vscode = __importStar(require(\"vscode\"));\nclass PlanPanelProvider {\n    constructor(ctx, client, approvals) {\n        this.ctx = ctx;\n        this.client = client;\n        this.approvals = approvals;\n        this.steps = [];\n        this.selectedIndex = 0;\n        this.selectedPatch = null;\n    }\n    resolveWebviewView(view) {\n        console.log('üîß PlanPanelProvider resolveWebviewView called');\n        console.log('üîç Webview details:', {\n            viewType: view.viewType,\n            title: view.title,\n            description: view.description\n        });\n        try {\n            this.view = view;\n            view.webview.options = { enableScripts: true };\n            // Immediately set simple HTML to test\n            view.webview.html = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <style>\n    body { \n      font-family: var(--vscode-font-family); \n      color: var(--vscode-foreground); \n      background: var(--vscode-editor-background); \n      margin: 16px; \n      padding: 16px;\n    }\n    .test-message { \n      background: var(--vscode-textBlockQuote-background); \n      padding: 16px; \n      border-radius: 8px; \n      border-left: 4px solid var(--vscode-focusBorder);\n      margin-bottom: 16px;\n    }\n    button { \n      padding: 8px 16px; \n      background: var(--vscode-button-background); \n      color: var(--vscode-button-foreground); \n      border: none; \n      border-radius: 4px; \n      cursor: pointer; \n    }\n  </style>\n</head>\n<body>\n  <div class=\"test-message\">\n    <h3>üìã Plan & Act - Connection Test</h3>\n    <p>This is a test to verify the webview is working properly.</p>\n    <button onclick=\"testDemo()\">Load Demo Plan</button>\n  </div>\n  <script>\n    const vscode = acquireVsCodeApi();\n    function testDemo() {\n      vscode.postMessage({ type: 'load-demo-plan' });\n    }\n  </script>\n</body>\n</html>`;\n            console.log('‚úÖ PlanPanelProvider webview HTML set successfully');\n            // Then call the full render\n            setTimeout(() => {\n                this.render();\n            }, 1000);\n        }\n        catch (error) {\n            console.error('‚ùå PlanPanelProvider resolveWebviewView failed:', error);\n        }\n        view.webview.onDidReceiveMessage(async (m) => {\n            if (m.type === 'load-plan' && m.issue) {\n                this.steps = await this.client.proposePlan(m.issue);\n                this.selectedIndex = 0;\n                this.selectedPatch = this.steps[0]?.patch || null;\n                this.render();\n            }\n            if (m.type === 'load-demo-plan') {\n                // Load demo plan for testing\n                this.steps = [\n                    { description: 'Analyze requirements and create project structure', status: 'pending', patch: '// Demo patch 1\\n+ Create new component\\n- Remove old file' },\n                    { description: 'Implement core functionality', status: 'pending', patch: '// Demo patch 2\\n+ Add main logic\\n+ Update tests' },\n                    { description: 'Add error handling and validation', status: 'pending', patch: '// Demo patch 3\\n+ Try-catch blocks\\n+ Input validation' }\n                ];\n                this.selectedIndex = 0;\n                this.selectedPatch = this.steps[0]?.patch || null;\n                this.render();\n                vscode.window.showInformationMessage('Demo plan loaded! üöÄ');\n            }\n            if (m.type === 'select' && typeof m.index === 'number') {\n                this.selectedIndex = m.index;\n                this.selectedPatch = this.steps[m.index]?.patch || null;\n                this.render();\n            }\n            if (m.type === 'approve') {\n                this.approvals.approve(this.steps[this.selectedIndex]);\n            }\n            if (m.type === 'reject') {\n                this.approvals.reject(this.steps[this.selectedIndex]);\n            }\n            if (m.type === 'applyPatch') {\n                vscode.commands.executeCommand('aep.applyPatch');\n            }\n        });\n    }\n    refresh() { if (this.view)\n        this.render(); }\n    async applySelectedPatch() {\n        if (!this.selectedPatch) {\n            vscode.window.showWarningMessage('No patch selected');\n            return;\n        }\n        const res = await this.client.applyPatch(this.selectedPatch);\n        vscode.window.showInformationMessage(res.applied ? 'Patch applied' : 'Patch failed');\n    }\n    render() {\n        console.log('üé® PlanPanelProvider render() called with steps:', this.steps.length);\n        // Show default content if no steps are loaded\n        if (this.steps.length === 0) {\n            const html = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <style>\n    body { font-family: var(--vscode-font-family); color: var(--vscode-foreground); background: var(--vscode-editor-background); margin: 16px; }\n    .wrap { max-width: 400px; }\n    h2 { color: var(--vscode-foreground); margin-bottom: 16px; }\n    p { color: var(--vscode-descriptionForeground); margin-bottom: 16px; }\n    .placeholder { text-align: center; padding: 40px 20px; border: 2px dashed var(--vscode-contrastBorder); border-radius: 8px; background: var(--vscode-textBlockQuote-background); }\n    .placeholder h3 { margin-bottom: 16px; color: var(--vscode-foreground); }\n    .sample-issue { background: var(--vscode-list-hoverBackground); padding: 12px; margin: 8px 0; border-radius: 4px; cursor: pointer; border: 1px solid var(--vscode-contrastBorder); }\n    .sample-issue:hover { background: var(--vscode-list-activeSelectionBackground); }\n    button { padding: 8px 16px; background: var(--vscode-button-background); color: var(--vscode-button-foreground); border: none; border-radius: 4px; cursor: pointer; margin: 4px; }\n    button:hover { background: var(--vscode-button-hoverBackground); }\n  </style>\n</head>\n<body>\n<div class=\"wrap\">\n  <h2>üìã Plan & Act</h2>\n  <div class=\"placeholder\">\n    <h3>üöÄ Ready to Plan!</h3>\n    <p>Select a JIRA issue from the Agent tab to generate an execution plan.</p>\n    <div style=\"margin-top: 20px;\">\n      <p><strong>How it works:</strong></p>\n      <ol style=\"text-align: left; display: inline-block;\">\n        <li>Choose a JIRA issue in the Agent tab</li>\n        <li>AI generates a step-by-step plan</li>\n        <li>Review and approve each step</li>\n        <li>Apply code changes automatically</li>\n      </ol>\n    </div>\n    <div style=\"margin-top: 20px;\">\n      <button id=\"demo-plan\">üß™ Load Demo Plan</button>\n    </div>\n  </div>\n</div>\n<script>\n  const vscode = acquireVsCodeApi();\n  document.getElementById('demo-plan')?.addEventListener('click', () => {\n    vscode.postMessage({ type: 'load-demo-plan' });\n  });\n</script>\n</body>\n</html>`;\n            this.view.webview.html = html;\n            return;\n        }\n        // Show actual plan content\n        const html = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <style>\n    body { font-family: var(--vscode-font-family); color: var(--vscode-foreground); background: var(--vscode-editor-background); margin: 16px; }\n    .wrap { max-width: 500px; }\n    h2 { color: var(--vscode-foreground); margin-bottom: 16px; }\n    .steps { list-style: none; padding: 0; }\n    .step { background: var(--vscode-list-hoverBackground); padding: 12px; margin: 8px 0; border-radius: 4px; cursor: pointer; border: 1px solid var(--vscode-contrastBorder); }\n    .step.selected { background: var(--vscode-list-activeSelectionBackground); border-color: var(--vscode-focusBorder); }\n    .step:hover { background: var(--vscode-list-activeSelectionBackground); }\n    .actions { margin-top: 16px; display: flex; gap: 8px; flex-wrap: wrap; }\n    button { padding: 8px 16px; background: var(--vscode-button-background); color: var(--vscode-button-foreground); border: none; border-radius: 4px; cursor: pointer; }\n    button:hover { background: var(--vscode-button-hoverBackground); }\n    button.approve { background: var(--vscode-testing-iconPassed); }\n    button.reject { background: var(--vscode-testing-iconFailed); }\n    .patch { margin-top: 16px; padding: 12px; background: var(--vscode-textCodeBlock-background); border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto; border: 1px solid var(--vscode-contrastBorder); }\n  </style>\n</head>\n<body>\n<div class=\"wrap\">\n  <h2>üìã Execution Plan (${this.steps.length} steps)</h2>\n  <ol class=\"steps\">\n    ${this.steps.map((step, i) => `\n      <li class=\"step ${i === this.selectedIndex ? 'selected' : ''}\" data-index=\"${i}\">\n        <strong>Step ${i + 1}:</strong> ${step.description || step.task || 'Untitled step'}\n        ${step.status ? `<span style=\"float: right; color: var(--vscode-descriptionForeground);\">${step.status}</span>` : ''}\n      </li>\n    `).join('')}\n  </ol>\n  <div class=\"actions\">\n    <button class=\"approve\" id=\"approve\">‚úÖ Approve Step</button>\n    <button class=\"reject\" id=\"reject\">‚ùå Reject Step</button>\n    ${this.selectedPatch ? '<button id=\"apply-patch\">üîß Apply Patch</button>' : ''}\n  </div>\n  ${this.selectedPatch ? `<div class=\"patch\"><strong>Selected Patch:</strong><br><pre>${this.selectedPatch.substring(0, 500)}${this.selectedPatch.length > 500 ? '...' : ''}</pre></div>` : ''}\n</div>\n<script>\n  const vscode = acquireVsCodeApi();\n  document.querySelectorAll('.step').forEach((step, index) => {\n    step.addEventListener('click', () => {\n      vscode.postMessage({ type: 'select', index });\n    });\n  });\n  document.getElementById('approve')?.addEventListener('click', () => {\n    vscode.postMessage({ type: 'approve' });\n  });\n  document.getElementById('reject')?.addEventListener('click', () => {\n    vscode.postMessage({ type: 'reject' });\n  });\n  document.getElementById('apply-patch')?.addEventListener('click', () => {\n    vscode.postMessage({ type: 'applyPatch' });\n  });\n</script>\n</body>\n</html>`;\n        this.view.webview.html = html;\n    }\n}\nexports.PlanPanelProvider = PlanPanelProvider;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KV = void 0;\nclass KV {\n    constructor(ctx) {\n        this.ctx = ctx;\n    }\n    get(k) { return this.ctx.globalState.get(k); }\n    set(k, v) { return this.ctx.globalState.update(k, v); }\n}\nexports.KV = KV;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.greeting = greeting;\nfunction greeting(now = new Date()) {\n    const h = now.getHours();\n    if (h < 12)\n        return 'Good morning';\n    if (h < 18)\n        return 'Good afternoon';\n    return 'Good evening';\n}\n","module.exports = require(\"vscode\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/extension.ts\");\n",""],"names":[],"sourceRoot":""}