{
  "name": "aep-professional",
  "displayName": "AEP Professional",
  "publisher": "navralabs",
  "version": "0.0.2",
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "main": "./out/extension.js",
  "icon": "media/aep-icon-256.png",
  "contributes": {
    "configuration": {
      "title": "NAVI Assistant",
      "properties": {
        "aep.navi.backendUrl": {
          "type": "string",
          "default": "http://127.0.0.1:8787",
          "description": "Backend URL for NAVI Assistant API calls (base URL without path)"
        },
        "aep.navi.orgId": {
          "type": "string",
          "default": "default",
          "description": "Org id sent to NAVI backend for policy and coverage enforcement"
        },
        "aep.navi.userId": {
          "type": "string",
          "default": "default_user",
          "description": "User id sent to NAVI backend for scans and memory context"
        },
        "aep.navi.authToken": {
          "type": "string",
          "default": "",
          "description": "Bearer token for JWT-enabled NAVI backend (device-code login token)"
        },
        "aep.navi.autoScanEnabled": {
          "type": "boolean",
          "default": true,
          "description": "Automatically scan the repo when consented (interval-based)."
        },
        "aep.navi.autoScanIntervalHours": {
          "type": "number",
          "default": 24,
          "minimum": 1,
          "maximum": 168,
          "description": "How often to run the automatic repo scan."
        },
        "aep.smartMode.autoApplyThreshold": {
          "type": "number",
          "default": 0.3,
          "minimum": 0,
          "maximum": 1,
          "description": "Risk threshold below which changes are automatically applied (0.0 = never auto-apply, 1.0 = always auto-apply)"
        },
        "aep.smartMode.showProgressNotifications": {
          "type": "boolean",
          "default": true,
          "description": "Show progress notifications during Smart Mode operations"
        },
        "aep.smartMode.enableSmartVerification": {
          "type": "boolean",
          "default": true,
          "description": "Enable smart verification mode for medium-risk changes"
        },
        "aep.navi.requestTimeout": {
          "type": "number",
          "default": 60000,
          "minimum": 10000,
          "maximum": 300000,
          "description": "Timeout in milliseconds for NAVI API requests (10s-300s). Increase for complex multi-step autonomous operations."
        },
        "aep.context.maxSearchFiles": {
          "type": "number",
          "default": 500,
          "minimum": 10,
          "maximum": 10000,
          "description": "Maximum number of files to search in large codebases when gathering context"
        },
        "aep.context.maxMatchesPerFile": {
          "type": "number",
          "default": 10,
          "minimum": 1,
          "maximum": 100,
          "description": "Maximum number of matches to show per file when gathering context"
        },
        "aep.context.maxSearchResults": {
          "type": "number",
          "default": 50,
          "minimum": 5,
          "maximum": 500,
          "description": "Maximum total number of search results to return when gathering context"
        },
        "aep.navi.useToolStreaming": {
          "type": "boolean",
          "default": true,
          "description": "Enable advanced streaming mode with real-time tool execution and interactive progress updates"
        },
        "aep.navi.useAutonomousMode": {
          "type": "boolean",
          "default": false,
          "description": "Enable autonomous mode for end-to-end task completion with automatic verification, self-healing, and iteration until success"
        }
      }
    },
    "commands": [
      {
        "command": "aep.openNavi",
        "title": "AEP: Open NAVI Assistant"
      },
      {
        "command": "aep.attachSelection",
        "title": "NAVI: Attach Selected Code"
      },
      {
        "command": "aep.attachCurrentFile",
        "title": "NAVI: Attach Current File"
      },
      {
        "command": "aep.checkErrorsAndFix",
        "title": "NAVI: Check Errors & Fix"
      },
      {
        "command": "aep.generateTestsForFile",
        "title": "NAVI: Generate Tests for File"
      },
      {
        "command": "aep.navi.smartReviewWorkspace",
        "title": "NAVI: Smart Review Workspace",
        "icon": "$(search-view-icon)"
      },
      {
        "command": "aep.navi.smartReviewSelection",
        "title": "NAVI: Smart Review Selection",
        "icon": "$(file-text)"
      },
      {
        "command": "aep.navi.smartReviewWithInstruction",
        "title": "NAVI: Smart Review with Custom Instruction",
        "icon": "$(edit)"
      },
      {
        "command": "aep.navi.applySmartDiff",
        "title": "NAVI: Apply Smart Diff",
        "icon": "$(diff)"
      },
      {
        "command": "aep.navi.undoSmartMode",
        "title": "NAVI: Undo Last Smart Mode Operation",
        "icon": "$(discard)"
      },
      {
        "command": "aep.navi.smartModeSettings",
        "title": "NAVI: Smart Mode Settings",
        "icon": "$(settings-gear)"
      }
    ],
    "menus": {
      "commandPalette": [
        {
          "command": "aep.navi.smartReviewWorkspace",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "aep.navi.smartReviewSelection",
          "when": "editorHasSelection || activeEditor"
        },
        {
          "command": "aep.navi.smartReviewWithInstruction",
          "when": "workspaceFolderCount > 0"
        },
        {
          "command": "aep.navi.applySmartDiff"
        },
        {
          "command": "aep.navi.undoSmartMode"
        },
        {
          "command": "aep.navi.smartModeSettings"
        }
      ],
      "editor/context": [
        {
          "command": "aep.navi.smartReviewSelection",
          "when": "editorTextFocus",
          "group": "1_modification@1"
        }
      ],
      "explorer/context": [
        {
          "command": "aep.navi.smartReviewWorkspace",
          "when": "explorerViewletFocus",
          "group": "7_modification@1"
        }
      ]
    },
    "viewsContainers": {
      "activitybar": [
        {
          "id": "aep",
          "title": "AEP",
          "icon": "media/aep-activitybar.svg"
        }
      ]
    },
    "views": {
      "aep": [
        {
          "id": "aep.chatView",
          "name": "NAVI Assistant",
          "type": "webview",
          "icon": "media/mascot-navi-fox.svg"
        }
      ]
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "postinstall": "npm run install:webview",
    "install:webview": "cd webview && npm install",
    "build:webview": "npm --prefix webview run build",
    "compile": "npm run build:webview && tsc -p ./",
    "watch": "tsc -watch -p ./",
    "lint": "eslint src --ext ts",
    "demo-backend": "node demo-backend.js",
    "test:undo": "npm run compile && node --test out/tests/undoMetadata.test.js"
  },
  "dependencies": {
    "@aep/navi-contracts": "0.1.0",
    "@octokit/rest": "^22.0.1",
    "@types/diff": "^8.0.0",
    "axios": "^1.13.2",
    "diff": "^8.0.2",
    "fast-glob": "^3.3.3",
    "simple-git": "^3.30.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/vscode": "^1.85.0",
    "cors": "^2.8.5",
    "eslint": "^9.0.0",
    "express": "^4.21.2",
    "typescript": "^5.4.0"
  }
}
