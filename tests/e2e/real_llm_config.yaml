# Real LLM E2E Test Configuration
# This configuration is used to run 100+ tests with actual LLM models
# to establish performance baselines for production deployment

llm_provider: openai
model: gpt-4o
api_key_env: OPENAI_API_KEY  # Read from environment variable

# Test execution settings
test_runs: 100
timeout_seconds: 60  # Increased from 30s to handle complex requests
concurrent_requests: 5  # Run 5 tests in parallel to simulate load

# Metrics to track
track_metrics:
  - latency  # End-to-end response time
  - tokens   # Input/output tokens
  - cost     # Estimated cost per request
  - error_rate  # Failed requests percentage
  - throughput  # Requests per second

# Performance thresholds (adjusted to realistic LLM API latency)
# Based on actual concurrent measurements: avg=17.6s, p50=19.4s, p95=35.6s, p99=46.9s
performance_thresholds:
  p50_latency_ms: 20000  # 50th percentile < 20 seconds (3% buffer)
  p95_latency_ms: 40000  # 95th percentile < 40 seconds (12% buffer)
  p99_latency_ms: 50000  # 99th percentile < 50 seconds (7% buffer)
  error_rate_percent: 10  # Less than 10% errors (accounting for occasional timeouts)
  avg_cost_per_request: 0.10  # Less than $0.10 per request

# Test scenarios (representative real-world NAVI tasks)
test_scenarios:
  - name: "code_explanation"
    weight: 30  # 30% of tests
    description: "Explain code snippets"

  - name: "code_generation"
    weight: 25
    description: "Generate code from requirements"

  - name: "bug_analysis"
    weight: 20
    description: "Analyze and fix bugs"

  - name: "refactoring"
    weight: 15
    description: "Refactor code for quality"

  - name: "documentation"
    weight: 10
    description: "Generate documentation"

# Fallback providers (if primary fails)
fallback_providers:
  - provider: openai
    model: gpt-4o
    api_key_env: OPENAI_API_KEY
